"use strict";(self.webpackChunktest_ng7=self.webpackChunktest_ng7||[]).push([[987,161],{2179:(v,_,i)=>{i.r(_),i.d(_,{BillingMethodModule:()=>G});var o=i(6895),c=i(7750),t=i(4650),l=i(4006),m=i(4903),d=i(3476),g=i(8161);function p(n,a){1&n&&(t.ynx(0),t.TgZ(1,"div",8)(2,"div",9)(3,"span",10),t._uU(4,"Loading..."),t.qZA()()(),t.BQk())}function u(n,a){1&n&&(t.TgZ(0,"span",21),t._uU(1," * Billing Method is required. "),t.qZA())}function f(n,a){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,u,2,0,"span",20),t.qZA()),2&n){const e=t.oxw(3);t.xp6(1),t.Q6J("ngIf",null==e.addEditForm.controls.name.errors?null:e.addEditForm.controls.name.errors.required)}}function B(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"button",22),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(3);return t.KtG(s.onUpdate())}),t._uU(1,"Update Billing Method"),t.qZA()}}function T(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"button",22),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(3);return t.KtG(s.onSubmit())}),t._uU(1,"Add Billing Method"),t.qZA()}}function C(n,a){if(1&n&&(t.TgZ(0,"form",11)(1,"div",12)(2,"div",13)(3,"div",14)(4,"label",15),t._uU(5,"Billing Method *"),t.qZA(),t._UZ(6,"input",16),t.YNc(7,f,2,1,"div",0),t.qZA()()(),t.TgZ(8,"div",17),t.YNc(9,B,2,0,"button",18),t.YNc(10,T,2,0,"button",18),t.TgZ(11,"button",19),t._uU(12,"Cancel"),t.qZA()()()),2&n){const e=t.oxw(2);t.Q6J("formGroup",e.addEditForm),t.xp6(7),t.Q6J("ngIf",e.addEditForm.controls.name.errors&&(e.addEditForm.controls.name.dirty||e.addEditForm.controls.name.touched)),t.xp6(2),t.Q6J("ngIf",e.editForm),t.xp6(1),t.Q6J("ngIf",!e.editForm)}}function M(n,a){if(1&n&&(t.TgZ(0,"div"),t._UZ(1,"app-page-header",2),t.TgZ(2,"div",3)(3,"div",4)(4,"div",5),t._uU(5," Billing Method "),t.qZA(),t.TgZ(6,"div",6),t.YNc(7,p,5,0,"ng-container",0),t.YNc(8,C,13,4,"form",7),t.qZA()()()()),2&n){const e=t.oxw();t.Q6J("@routerTransition",void 0),t.xp6(1),t.Q6J("heading","Add | Edit Billing Method"),t.xp6(1),t.Q6J("@routerTransition",void 0),t.xp6(5),t.Q6J("ngIf",e.isLoading),t.xp6(1),t.Q6J("ngIf",!e.isLoading)}}function E(n,a){1&n&&(t.ynx(0),t.TgZ(1,"div",8)(2,"div",9)(3,"span",10),t._uU(4,"Loading..."),t.qZA()()(),t.BQk())}function y(n,a){1&n&&(t.TgZ(0,"span",21),t._uU(1," * Billing Method is required. "),t.qZA())}function I(n,a){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,y,2,0,"span",20),t.qZA()),2&n){const e=t.oxw(3);t.xp6(1),t.Q6J("ngIf",null==e.addEditForm.controls.name.errors?null:e.addEditForm.controls.name.errors.required)}}function P(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"form",11)(1,"div",12)(2,"div",13)(3,"div",14)(4,"label",23),t._uU(5,"Billing Method *"),t.qZA(),t._UZ(6,"input",16),t.YNc(7,I,2,1,"div",0),t.qZA()(),t._UZ(8,"div",24),t.qZA(),t.TgZ(9,"div",17)(10,"button",22),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.onSubmit())}),t._uU(11,"Add Billing Method"),t.qZA(),t.TgZ(12,"button",25),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.cancelEvent())}),t._uU(13,"Cancel"),t.qZA()()()}if(2&n){const e=t.oxw(2);t.Q6J("formGroup",e.addEditForm),t.xp6(7),t.Q6J("ngIf",e.addEditForm.controls.name.errors&&(e.addEditForm.controls.name.dirty||e.addEditForm.controls.name.touched))}}function O(n,a){if(1&n&&(t.TgZ(0,"div",4)(1,"div",5),t._uU(2," Billing Method "),t.qZA(),t.TgZ(3,"div",6),t.YNc(4,E,5,0,"ng-container",0),t.YNc(5,P,14,2,"form",7),t.qZA()()),2&n){const e=t.oxw();t.xp6(4),t.Q6J("ngIf",e.isLoading),t.xp6(1),t.Q6J("ngIf",!e.isLoading)}}let x=(()=>{class n{constructor(e,r,s,h){this.router=e,this.fb=r,this.route=s,this.billingMethodService=h,this.editForm=!1,this.isLoading=!1,this.options=["Monthly","On Completion","Quarterly","Other"],this.newItemEvent=new t.vpe,this.route.params.subscribe(b=>{""!==b.tempId&&null!=b.tempId&&(this.tempId=b.tempId,this.editForm=!0,this.getBillingMethod(this.tempId))}),this.addEditForm=r.group({name:["",[l.kI.required]]})}ngOnInit(){}getValue(e){return{name:e.name}}getBillingMethod(e){this.isLoading=!0,this.billingMethodService.getBillingMethodById(e).subscribe(r=>{this.addEditForm.patchValue({...this.getValue(r)}),this.isLoading=!1},r=>{this.isLoading=!1,this.router.navigate(["/data-management/billing-methods"])})}onSubmit(){this.billingMethodService.addBillingMethod(this.addEditForm.value).subscribe(e=>{e&&(this.addEditForm.reset(),this.newItemEvent.emit())})}cancelEvent(){this.addEditForm.reset(),this.newItemEvent.emit()}onUpdate(){this.billingMethodService.updateBillingMethod(this.tempId,this.addEditForm.value).subscribe(e=>{e&&(this.addEditForm.reset(),this.router.navigate(["/data-management/billing-methods"]))})}onReady(e){e.ui.getEditableElement().parentElement.insertBefore(e.ui.view.toolbar.element,e.ui.getEditableElement())}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(c.F0),t.Y36(l.qu),t.Y36(c.gz),t.Y36(d.p))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-add-edit-billing-method"]],outputs:{newItemEvent:"newItemEvent"},decls:2,vars:2,consts:[[4,"ngIf"],["class","card",4,"ngIf"],[3,"heading"],[1,"container-fluid","mt-2"],[1,"card"],[1,"card-header"],[1,"card-body"],["novalidate","",3,"formGroup",4,"ngIf"],[1,"text-center"],["role","status",1,"spinner-border"],[1,"sr-only"],["novalidate","",3,"formGroup"],[1,"row"],[1,"col-md-12"],[1,"form-group","mb-2"],[1,"bmd-label-floating"],["formControlName","name","type","text",1,"form-control"],[1,"form-group","mb-2","py-2"],["type","button","class","btn btn-info",3,"click",4,"ngIf"],["type","button","routerLink","/data-management/billing-methods",1,"btn","btn-secondary"],["class"," text-danger error",4,"ngIf"],[1,"text-danger","error"],["type","button",1,"btn","btn-info",3,"click"],[1,"bmd-label-floating","mb-2"],[1,"col-md-6"],["type","button",1,"btn","btn-outline-secondary",3,"click"]],template:function(e,r){1&e&&(t.YNc(0,M,9,5,"div",0),t.YNc(1,O,6,2,"div",1)),2&e&&(t.Q6J("ngIf",r.editForm),t.xp6(1),t.Q6J("ngIf",!r.editForm))},dependencies:[o.O5,c.rH,l._Y,l.Fj,l.JJ,l.JL,l.sg,l.u,g.q],styles:[".ck.ck-content[_ngcontent-%COMP%]{border:2px solid #707070!important}"],data:{animation:[(0,m.Z9)()]}}),n})();var A=i(4221),U=i(7579),S=i(8372),F=i(1884),J=i(7253),L=i(4304);function D(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"app-add-edit-billing-method",12),t.NdJ("newItemEvent",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.reload())}),t.qZA()}}function N(n,a){1&n&&(t.ynx(0),t.TgZ(1,"div",13)(2,"div",14)(3,"span",15),t._uU(4,"Loading..."),t.qZA()()(),t.BQk())}function Y(n,a){1&n&&(t.TgZ(0,"div")(1,"p",13),t._uU(2,"No Billing Method found"),t.qZA()())}function w(n,a){1&n&&(t.TgZ(0,"th",20),t._uU(1,"Actions"),t.qZA())}function Q(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"td")(1,"div",21)(2,"button",22),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().$implicit,h=t.oxw(3);return t.KtG(h.editBillingMethod(s.id))}),t._UZ(3,"img",23),t.qZA(),t.TgZ(4,"button",22),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().$implicit,h=t.oxw(3);return t.KtG(h.deleteBillingMethod(s.id))}),t._UZ(5,"img",24),t.qZA()()()}}function H(n,a){if(1&n&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.YNc(3,Q,6,0,"td",9),t.qZA()),2&n){const e=a.$implicit,r=t.oxw(3);t.xp6(2),t.Oqu(null==e?null:e.name),t.xp6(1),t.Q6J("ngIf",r.isEditAccess)}}function R(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"table",16)(2,"thead")(3,"tr")(4,"th",17),t.NdJ("sort",function(s){t.CHM(e);const h=t.oxw(2);return t.KtG(h.onSort(s))}),t.TgZ(5,"span"),t._uU(6,"Name"),t.qZA()(),t.YNc(7,w,2,0,"th",18),t.qZA()(),t.TgZ(8,"tbody"),t.YNc(9,H,4,2,"tr",19),t.qZA()()()}if(2&n){const e=t.oxw(2);t.xp6(7),t.Q6J("ngIf",e.isEditAccess),t.xp6(2),t.Q6J("ngForOf",e.billingMethods)}}function K(n,a){if(1&n&&t.YNc(0,R,10,2,"div",9),2&n){const e=t.oxw();t.Q6J("ngIf",!e.isLoading)}}const j=[{path:"",component:(()=>{class n{constructor(e,r,s,h,b){this.router=e,this.billingMethodService=r,this.cdr=s,this.jwtService=h,this.confirmationDialogService=b,this.searchTerm="",this.searchTermUpdate=new U.x,this.billingMethods=[],this.isBillingMethods=!0,this.isLoading=!1,this._state={page:1,limit:20,totalPages:1,totalResults:0,searchTerm:"",sortColumn:"createdAt",sortDirection:"asc"},this.isEditAccess=!1,this.searchTermUpdate.pipe((0,S.b)(200),(0,F.x)()).subscribe(k=>{this._state.searchTerm=k,this.getBillingMethods(this._state)})}ngOnInit(){this.isLoading=!0,this.isEditAccess=this.jwtService.checkAccess("data-mangement"),this.getBillingMethods(this._state)}getBillingMethods(e){this.isLoading=!0,this.billingMethodService.getBillingMethods(e).subscribe(r=>{this.billingMethods=r.results,this.setState(r),this.isBillingMethods=0!=this.billingMethods.length,this.isLoading=!1},r=>{this.isLoading=!1})}reload(){window.scrollTo(0,400),this.getBillingMethods(this._state)}editBillingMethod(e){this.router.navigate(["/data-management/billing-methods/edit-billing-method/"+e])}deleteBillingMethod(e){this.confirmationDialogService.confirm("Please confirm..","Do you really want to delete this billing method ?").then(r=>{r&&this.billingMethodService.deleteBillingMethod(e).subscribe(s=>{this.getBillingMethods(this._state)})})}onSort({column:e,direction:r}){alert(e),this.sortedColumn=e,this.sortedDirection=r,this._state.sortColumn=e,this._state.sortDirection=r,this.getBillingMethods(this._state)}refresh(){this.getBillingMethods(this._state)}setState(e){this._state.page=e.page,this._state.limit=e.limit,this._state.totalPages=e.totalPages,this._state.totalResults=e.totalResults}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(c.F0),t.Y36(d.p),t.Y36(t.sBO),t.Y36(J.Tj),t.Y36(L.O))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-billing-method"]],viewQuery:function(e,r){if(1&e&&t.Gf(A.j,5),2&e){let s;t.iGM(s=t.CRH())&&(r.headers=s)}},decls:14,vars:8,consts:[[3,"heading"],[1,"container-fluid","mt-2"],[3,"newItemEvent",4,"ngIf"],[1,"card","card-2","bg-transparent","mt-3"],[1,"card-body"],[1,"row","mb-2","search-header"],[1,"col-md-12","text-left"],[1,"form-group","mb-1"],["type","text","type","text","name","searchTerm","placeholder","Search here...",1,"form-control",3,"ngModel","ngModelChange"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["table",""],[3,"newItemEvent"],[1,"text-center"],["role","status",1,"spinner-border"],[1,"sr-only"],[1,"table","table-hover"],["scope","col","sortable","name",3,"sort"],["scope","col","width","100",4,"ngIf"],[4,"ngFor","ngForOf"],["scope","col","width","100"],[1,"action-buttons"],[3,"click"],["src","assets/images/pencil.svg","alt",""],["src","assets/images/icons8-trash-can.svg","alt",""]],template:function(e,r){if(1&e&&(t.TgZ(0,"div"),t._UZ(1,"app-page-header",0),t.TgZ(2,"div",1),t.YNc(3,D,1,0,"app-add-edit-billing-method",2),t.TgZ(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"div",7)(9,"input",8),t.NdJ("ngModelChange",function(h){return r._state.searchTerm=h})("ngModelChange",function(h){return r.searchTermUpdate.next(h)}),t.qZA()()()(),t.YNc(10,N,5,0,"ng-container",9),t.YNc(11,Y,3,0,"div",10),t.YNc(12,K,1,1,"ng-template",null,11,t.W1O),t.qZA()()()()),2&e){const s=t.MAs(13);t.Q6J("@routerTransition",void 0),t.xp6(1),t.Q6J("heading","Billing Methods"),t.xp6(1),t.Q6J("@routerTransition",void 0),t.xp6(1),t.Q6J("ngIf",r.isEditAccess),t.xp6(6),t.Q6J("ngModel",r._state.searchTerm),t.xp6(1),t.Q6J("ngIf",r.isLoading),t.xp6(1),t.Q6J("ngIf",!r.isBillingMethods)("ngIfElse",s)}},dependencies:[o.sg,o.O5,l.Fj,l.JJ,g.q,l.On,x],data:{animation:[(0,m.Z9)()]}}),n})()},{path:"add-billing-method",component:x},{path:"edit-billing-method/:tempId",component:x}];let W=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[c.Bz.forChild(j),c.Bz]}),n})();var $=i(4336),Z=i(6393);let G=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[A.j,d.p],imports:[o.ez,W,l.UX,$.$n,l.u5,Z.ZS,Z.jF]}),n})()},3476:(v,_,i)=>{i.d(_,{p:()=>t});var o=i(4650),c=i(2487);let t=(()=>{class l{constructor(d){this.apiService=d}getBillingMethods(d){return this.apiService.get(""==d.searchTerm?`/billing-method?sortBy=${d.sortColumn+":"+d.sortDirection}&limit=${d.limit}&page=${d.page}`:`/billing-method?sortBy=${d.sortColumn+":"+d.sortDirection}&limit=${d.limit}&page=${d.page}&search=${d.searchTerm}`)}addBillingMethod(d){return this.apiService.post("/billing-method",d)}getBillingMethodById(d){return this.apiService.get(`/billing-method/${d}`)}deleteBillingMethod(d){return this.apiService.delete(`/billing-method/${d}`)}updateBillingMethod(d,g){return this.apiService.patch(`/billing-method/${d}`,g)}}return l.\u0275fac=function(d){return new(d||l)(o.LFG(c.s))},l.\u0275prov=o.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})()},4903:(v,_,i)=>{i.d(_,{Z9:()=>c});var o=i(7340);function c(){return function t(){return(0,o.X$)("routerTransition",[])}()}},4221:(v,_,i)=>{i.d(_,{j:()=>o.j});var o=i(8260)},8260:(v,_,i)=>{i.d(_,{j:()=>t});var o=i(4650);const c={asc:"desc",desc:"asc","":"asc"};let t=(()=>{class l{constructor(){this.direction="",this.sort=new o.vpe}ngOnChanges(d){this.sortable!==d?.oldColumn?.currentValue&&d?.oldColumn?.currentValue!==d?.oldColumn?.previousValue&&(this.direction="")}rotate(){this.direction=c[this.direction],this.sort.emit({column:this.sortable,direction:this.direction})}}return l.\u0275fac=function(d){return new(d||l)},l.\u0275dir=o.lG2({type:l,selectors:[["th","sortable",""]],hostVars:4,hostBindings:function(d,g){1&d&&o.NdJ("click",function(){return g.rotate()}),2&d&&o.ekj("asc","asc"===g.direction)("desc","desc"===g.direction)},inputs:{sortable:"sortable",oldColumn:"oldColumn",direction:"direction"},outputs:{sort:"sort"},exportAs:["NgbdSortableHeader"],features:[o.TTD]}),l})()},4336:(v,_,i)=>{i.d(_,{$n:()=>o.$});var o=i(2956);i(110),i(1880)},8161:(v,_,i)=>{i.d(_,{q:()=>d});var o=i(4650),c=i(6895),t=i(7750);const l=function(g){return["/",g]};function m(g,p){if(1&g&&(o.TgZ(0,"li",6)(1,"a",7),o._uU(2),o.qZA()()),2&g){const u=o.oxw();o.xp6(1),o.Q6J("routerLink",o.VKq(2,l,u.previousLink)),o.xp6(1),o.Oqu(u.previousHeading)}}let d=(()=>{class g{constructor(){this.previousLink=decodeURIComponent(this.previousLink)}ngOnInit(){}}return g.\u0275fac=function(u){return new(u||g)},g.\u0275cmp=o.Xpm({type:g,selectors:[["app-page-header"]],inputs:{previousHeading:"previousHeading",previousLink:"previousLink",heading:"heading",previoudIcon:"previoudIcon",icon:"icon"},decls:9,vars:6,consts:[[1,"row"],[1,"col-xl-12"],[1,"page-header"],[1,"breadcrumb"],["class","breadcrumb-item",4,"ngIf"],[1,"breadcrumb-item","active"],[1,"breadcrumb-item"],["href","Javascript:void(0)",3,"routerLink"]],template:function(u,f){1&u&&(o.TgZ(0,"div",0)(1,"div",1)(2,"h2",2),o._uU(3),o.qZA(),o.TgZ(4,"ol",3),o.YNc(5,m,3,4,"li",4),o.TgZ(6,"li",5),o._UZ(7,"i"),o._uU(8),o.qZA()()()()),2&u&&(o.xp6(3),o.hij(" ",f.heading," "),o.xp6(2),o.Q6J("ngIf",f.previousHeading),o.xp6(2),o.Gre("fa ",f.icon,""),o.xp6(1),o.hij(" ",f.heading,""))},dependencies:[c.O5,t.yS],styles:[".breadcrumb[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;margin-bottom:0;list-style:none;padding:7px 0 0 22px}.breadcrumb-item[_ngcontent-%COMP%]{color:#773784}.breadcrumb-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none!important;color:#773784}.breadcrumb-item.active[_ngcontent-%COMP%]{color:#773784}.breadcrumb[_ngcontent-%COMP%]   .breadcrumb-item[_ngcontent-%COMP%]:first-child   i[_ngcontent-%COMP%]{margin-right:1rem}@media (max-width: 768px){.breadcrumb-item.active[_ngcontent-%COMP%]{color:#773784}}"]}),g})()},2956:(v,_,i)=>{i.d(_,{$:()=>l});var o=i(6895),c=i(7750),t=i(4650);let l=(()=>{class m{}return m.\u0275fac=function(g){return new(g||m)},m.\u0275mod=t.oAB({type:m}),m.\u0275inj=t.cJS({imports:[o.ez,c.Bz]}),m})()},110:(v,_,i)=>{i.d(_,{o:()=>t});var o=i(6895),c=i(4650);let t=(()=>{class l{}return l.\u0275fac=function(d){return new(d||l)},l.\u0275mod=c.oAB({type:l}),l.\u0275inj=c.cJS({imports:[o.ez]}),l})()},7253:(v,_,i)=>{i.d(_,{Tj:()=>c.T}),i(6256);var c=i(4891)},8372:(v,_,i)=>{i.d(_,{b:()=>l});var o=i(4049),c=i(4482),t=i(5403);function l(m,d=o.z){return(0,c.e)((g,p)=>{let u=null,f=null,B=null;const T=()=>{if(u){u.unsubscribe(),u=null;const M=f;f=null,p.next(M)}};function C(){const M=B+m,E=d.now();if(E<M)return u=this.schedule(void 0,M-E),void p.add(u);T()}g.subscribe((0,t.x)(p,M=>{f=M,B=d.now(),u||(u=d.schedule(C,m),p.add(u))},()=>{T(),p.complete()},void 0,()=>{f=u=null}))})}}}]);