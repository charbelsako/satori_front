"use strict";(self.webpackChunktest_ng7=self.webpackChunktest_ng7||[]).push([[521,161],{7441:(v,g,n)=>{n.d(g,{x:()=>e});var l=n(2340),m=n(4650),a=n(529),f=n(2487);let e=(()=>{class p{constructor(i,u){this.http=i,this.apiService=u,this.url=l.N.backendUrl}getStaffs(i){return this.apiService.get(""==i.searchTerm?`/staffs?sortBy=${i.sortColumn+":"+i.sortDirection}&limit=${i.limit}&page=${i.page}`:`/staffs?sortBy=${i.sortColumn+":"+i.sortDirection}&limit=${i.limit}&page=${i.page}&search=${i.searchTerm}`)}getSearchStaffs(i,u){return this.apiService.post(""==i.searchTerm?`/staffs/search?sortBy=${i.sortColumn+":"+i.sortDirection}&limit=${i.limit}&page=${i.page}`:`/staffs/search?sortBy=${i.sortColumn+":"+i.sortDirection}&limit=${i.limit}&page=${i.page}&search=${i.searchTerm}`,{responsibleBillingManagerId:u})}addMember(i){return this.apiService.post("/staffs",i)}updateMember(i,u){return this.apiService.patch(`/staffs/${i}`,u)}getStaffById(i){return this.apiService.get("/staffs/"+i)}deleteUser(i){return this.apiService.delete("/staffs/"+i)}getActivity(i){return this.apiService.get(""==i.searchTerm?`/staffs/activity/all?sortBy=${i.sortColumn+":"+i.sortDirection}&limit=${i.limit}&page=${i.page}`:`/staffs/activity/all?sortBy=${i.sortColumn+":"+i.sortDirection}&limit=${i.limit}&page=${i.page}&search=${i.searchTerm}`)}}return p.\u0275fac=function(i){return new(i||p)(m.LFG(a.eN),m.LFG(f.s))},p.\u0275prov=m.Yz7({token:p,factory:p.\u0275fac}),p})()},521:(v,g,n)=>{n.r(g),n.d(g,{StaffModule:()=>Ae});var l=n(6895),m=n(7750),a=n(4006),f=n(4903),e=n(4650),p=n(6316),_=n(7441),i=n(7185),u=n(8161);function h(r,s){1&r&&(e.ynx(0),e.TgZ(1,"div",7)(2,"div",8)(3,"span",9),e._uU(4,"Loading..."),e.qZA()()(),e.BQk())}function T(r,s){1&r&&(e.TgZ(0,"span",31),e._uU(1," * Name is required and need to be a valid string. "),e.qZA())}function C(r,s){if(1&r&&(e.TgZ(0,"div"),e.YNc(1,T,2,0,"span",30),e.qZA()),2&r){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",(null==t.addEditForm.controls.name.errors?null:t.addEditForm.controls.name.errors.required)||(null==t.addEditForm.controls.name.errors?null:t.addEditForm.controls.name.errors.pattern))}}function M(r,s){1&r&&(e.TgZ(0,"span",31),e._uU(1," * Email is required and need to valid email. "),e.qZA())}function b(r,s){if(1&r&&(e.TgZ(0,"div"),e.YNc(1,M,2,0,"span",30),e.qZA()),2&r){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",(null==t.addEditForm.controls.email.errors?null:t.addEditForm.controls.email.errors.required)||(null==t.addEditForm.controls.email.errors?null:t.addEditForm.controls.email.errors.email))}}function Z(r,s){if(1&r&&(e.TgZ(0,"option",32),e._uU(1),e.qZA()),2&r){const t=s.$implicit;e.s9C("value",t.id),e.xp6(1),e.Oqu(null==t?null:t.name)}}function F(r,s){1&r&&(e.TgZ(0,"span",31),e._uU(1," * Role is required. "),e.qZA())}function J(r,s){if(1&r&&(e.TgZ(0,"div"),e.YNc(1,F,2,0,"span",30),e.qZA()),2&r){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==t.addEditForm.controls.role.errors?null:t.addEditForm.controls.role.errors.required)}}function w(r,s){1&r&&(e.TgZ(0,"span",31),e._uU(1," * Role is required. "),e.qZA())}function D(r,s){if(1&r&&(e.TgZ(0,"div"),e.YNc(1,w,2,0,"span",30),e.qZA()),2&r){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==t.addEditForm.controls.role.errors?null:t.addEditForm.controls.role.errors.required)}}function q(r,s){1&r&&(e.TgZ(0,"span"),e._uU(1,"\u2022 The passowrd is required"),e._UZ(2,"br"),e.qZA())}function O(r,s){1&r&&(e.TgZ(0,"span"),e._uU(1,"\u2022 The passowrd must contain (8 - 14 characters)"),e._UZ(2,"br"),e.qZA())}function P(r,s){1&r&&(e.TgZ(0,"span"),e._uU(1,"\u2022 Uppercase characters (A-Z)"),e._UZ(2,"br"),e.qZA())}function N(r,s){1&r&&(e.TgZ(0,"span"),e._uU(1,"\u2022 Lowercase characters (a-z)"),e._UZ(2,"br"),e.qZA())}function Q(r,s){1&r&&(e.TgZ(0,"span"),e._uU(1,"\u2022 Digits (0-9)"),e._UZ(2,"br"),e.qZA())}function Y(r,s){1&r&&(e.TgZ(0,"span"),e._uU(1,"\u2022 Special characters (@ $ ! % * # ~ ^ - + =)"),e.qZA())}function L(r,s){if(1&r&&(e.TgZ(0,"span",31),e.YNc(1,q,3,0,"span",5),e.YNc(2,O,3,0,"span",5),e.YNc(3,P,3,0,"span",5),e.YNc(4,N,3,0,"span",5),e.YNc(5,Q,3,0,"span",5),e.YNc(6,Y,2,0,"span",5),e.qZA()),2&r){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",null==t.addEditForm.controls.password.errors?null:t.addEditForm.controls.password.errors.required),e.xp6(1),e.Q6J("ngIf",(null==t.addEditForm.controls.password.errors?null:t.addEditForm.controls.password.errors.minlength)||(null==t.addEditForm.controls.password.errors?null:t.addEditForm.controls.password.errors.maxlength)),e.xp6(1),e.Q6J("ngIf",null==t.addEditForm.controls.password.errors?null:t.addEditForm.controls.password.errors.capitalAlpha),e.xp6(1),e.Q6J("ngIf",null==t.addEditForm.controls.password.errors?null:t.addEditForm.controls.password.errors.smallAlpha),e.xp6(1),e.Q6J("ngIf",null==t.addEditForm.controls.password.errors?null:t.addEditForm.controls.password.errors.numberValidation),e.xp6(1),e.Q6J("ngIf",null==t.addEditForm.controls.password.errors?null:t.addEditForm.controls.password.errors.specialChar)}}function k(r,s){if(1&r&&(e.TgZ(0,"div"),e.YNc(1,L,7,6,"span",30),e.qZA()),2&r){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",(null==t.addEditForm.controls.password.errors?null:t.addEditForm.controls.password.errors.mainValidation)||(null==t.addEditForm.controls.password.errors?null:t.addEditForm.controls.password.errors.required))}}function B(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"button",33),e.NdJ("click",function(){e.CHM(t);const d=e.oxw(2);return e.KtG(d.submitUpdateForm())}),e._uU(1,"Update Employee"),e.qZA()}}function H(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"button",33),e.NdJ("click",function(){e.CHM(t);const d=e.oxw(2);return e.KtG(d.submitForm())}),e._uU(1,"Add Employee"),e.qZA()}}function R(r,s){if(1&r&&(e.TgZ(0,"form",10)(1,"div",11)(2,"div",12)(3,"label",13),e._uU(4,"Name"),e.qZA(),e._UZ(5,"input",14),e.YNc(6,C,2,1,"div",5),e.qZA(),e.TgZ(7,"div",12)(8,"label",15),e._uU(9,"Email"),e.qZA(),e._UZ(10,"input",16),e.YNc(11,b,2,1,"div",5),e.qZA()(),e.TgZ(12,"div",11)(13,"div",12)(14,"label",17),e._uU(15,"Role"),e.qZA(),e.TgZ(16,"select",18)(17,"option",19),e._uU(18,"Select Role"),e.qZA(),e.YNc(19,Z,2,2,"option",20),e.qZA(),e.YNc(20,J,2,1,"div",5),e.qZA(),e.TgZ(21,"div",12)(22,"label",17),e._uU(23,"Profile"),e.qZA(),e.TgZ(24,"select",21)(25,"option",22),e._uU(26,"Select Profile"),e.qZA(),e.TgZ(27,"option",23),e._uU(28,"Rate Miner"),e.qZA(),e.TgZ(29,"option",24),e._uU(30,"Deal Mapper"),e.qZA()(),e.YNc(31,D,2,1,"div",5),e.qZA(),e.TgZ(32,"div",12)(33,"label",25),e._uU(34,"Password"),e.qZA(),e._UZ(35,"input",26),e.YNc(36,k,2,1,"div",5),e.qZA()(),e.TgZ(37,"div",27),e.YNc(38,B,2,0,"button",28),e.YNc(39,H,2,0,"button",28),e.TgZ(40,"button",29),e._uU(41,"Cancel"),e.qZA()()()),2&r){const t=e.oxw();e.Q6J("formGroup",t.addEditForm),e.xp6(6),e.Q6J("ngIf",t.addEditForm.controls.name.errors&&(t.submitted||t.addEditForm.controls.name.dirty||t.addEditForm.controls.name.touched)),e.xp6(5),e.Q6J("ngIf",t.addEditForm.controls.email.errors&&(t.submitted||t.addEditForm.controls.email.dirty||t.addEditForm.controls.email.touched)||t.addEditForm.controls.email.hasError("email")),e.xp6(8),e.Q6J("ngForOf",t.roles),e.xp6(1),e.Q6J("ngIf",t.addEditForm.controls.role.errors&&(t.submitted||t.addEditForm.controls.role.dirty||t.addEditForm.controls.role.touched)),e.xp6(11),e.Q6J("ngIf",t.addEditForm.controls.role.errors&&(t.submitted||t.addEditForm.controls.role.dirty||t.addEditForm.controls.role.touched)),e.xp6(5),e.Q6J("ngIf",t.addEditForm.controls.password.errors&&(t.submitted||t.addEditForm.controls.password.dirty||t.addEditForm.controls.password.touched)),e.xp6(2),e.Q6J("ngIf",t.editForm),e.xp6(1),e.Q6J("ngIf",!t.editForm)}}let E=(()=>{class r{constructor(t,o,d,c,x,A,xe){this.route=t,this.cdr=o,this.router=d,this.fb=c,this.rolesServie=x,this.staffsService=A,this.toastrService=xe,this.roles=[],this.editForm=!1,this.isLoading=!1,this.editData=[],this.submitted=!1,this.route.params.subscribe(y=>{""!==y.userId&&null!=y.userId&&(this.userId=y.userId,this.editForm=!0,this.getStaff(this.userId))}),this.addEditForm=this.fb.group(this.editForm?{name:[null,[a.kI.required,a.kI.pattern(/^[a-zA-Z\s]*$/)]],email:[null,[a.kI.required,a.kI.email]],role:[null,[a.kI.required]],profile:[""],password:[null,[a.kI.minLength(8),a.kI.maxLength(14),this.regexValidator(/^(?=.*\d)(?=.*[@$!%*#~^\-+=])(?=.*[a-z])(?=.*[A-Z]).{8,30}$/,{mainValidation:!0}),this.regexValidator(/^(?=.*\d).{1,}$/,{numberValidation:!0}),this.regexValidator(/^(?=.*[@$!%*#~^\-+=]).{1,}$/,{specialChar:!0}),this.regexValidator(/^(?=.*[a-z]).{1,}$/,{smallAlpha:!0}),this.regexValidator(/^(?=.*[A-Z]).{1,}$/,{capitalAlpha:!0})]]}:{name:["",[a.kI.required,a.kI.pattern(/^[a-zA-Z\s]*$/)]],email:["",[a.kI.required,a.kI.email]],role:["",[a.kI.required]],profile:[""],password:["",[a.kI.required,a.kI.minLength(8),a.kI.maxLength(14),this.regexValidator(/^(?=.*\d)(?=.*[@$!%*#~^\-+=])(?=.*[a-z])(?=.*[A-Z]).{8,30}$/,{mainValidation:!0}),this.regexValidator(/^(?=.*\d).{1,}$/,{numberValidation:!0}),this.regexValidator(/^(?=.*[@$!%*#~^\-+=]).{1,}$/,{specialChar:!0}),this.regexValidator(/^(?=.*[a-z]).{1,}$/,{smallAlpha:!0}),this.regexValidator(/^(?=.*[A-Z]).{1,}$/,{capitalAlpha:!0})]]})}regexValidator(t,o){return d=>d.value?t.test(d.value)?null:o:null}ngOnInit(){this.getAllRoles()}getAllRoles(){this.rolesServie.getAllRoles().subscribe(t=>{this.roles=t.results.filter(o=>1==o.isActive),this.cdr.detectChanges()})}submitForm(){this.addEditForm.valid?this.staffsService.addMember(this.addEditForm.value).subscribe(t=>{t&&(this.addEditForm.reset(),this.toastrService.success(t.name+" added!","Success"),this.router.navigate(["/employees"]))},t=>{this.toastrService.error(t.message)}):this.submitted=!0}submitUpdateForm(){this.addEditForm.valid?(this.editData=null==this.addEditForm.value.password||""==this.addEditForm.value.password?{name:this.addEditForm.value.name,email:this.addEditForm.value.email,role:this.addEditForm.value.role}:this.addEditForm.value,this.staffsService.updateMember(this.userId,this.editData).subscribe(t=>{t&&(this.addEditForm.reset(),this.toastrService.success(t.name+" Updated!","Success"),this.router.navigate(["/employees"]))},t=>{this.toastrService.error(t.message)})):this.submitted=!0}getStaff(t){this.isLoading=!0,this.staffsService.getStaffById(t).subscribe(o=>{this.addEditForm.patchValue(o),this.addEditForm.patchValue({role:o.role.id||o.role}),this.isLoading=!1,this.cdr.detectChanges()},o=>{this.isLoading=!1,this.router.navigate(["/employees"])})}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(m.gz),e.Y36(e.sBO),e.Y36(m.F0),e.Y36(a.qu),e.Y36(p.N),e.Y36(_.x),e.Y36(i._W))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-add-member"]],decls:9,vars:7,consts:[[3,"previousHeading","previousLink","heading"],[1,"container-fluid","mt-2"],[1,"card"],[1,"card-header"],[1,"card-body"],[4,"ngIf"],["autocomplete","off",3,"formGroup",4,"ngIf"],[1,"text-center"],["role","status",1,"spinner-border"],[1,"sr-only"],["autocomplete","off",3,"formGroup"],[1,"row","mb-2"],[1,"form-group","col-md-6"],["for","name"],["type","text","formControlName","name",1,"form-control","form-control-lg"],["for","email"],["type","email","autocomplete","off","formControlName","email",1,"form-control","form-control-lg"],["for","role"],["formControlName","role",1,"form-control","form-control-lg"],["value","","disabled",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","profile",1,"form-control","form-control-lg"],["value","","selected","","disabled",""],["value","rateMiner"],["value","dealMapper"],["for","password"],["type","password","formControlName","password","placeholder","Password","autocomplete","off",1,"form-control","form-control-lg"],[1,"form-group","mb-5","py-2","text-right"],["type","submit","class","btn btn-info",3,"click",4,"ngIf"],["type","button","routerLink","/employees",1,"btn","btn-secondary"],["class"," text-danger error",4,"ngIf"],[1,"text-danger","error"],[3,"value"],["type","submit",1,"btn","btn-info",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"div"),e._UZ(1,"app-page-header",0),e.TgZ(2,"div",1)(3,"div",2)(4,"div",3),e._uU(5," Employee Details "),e.qZA(),e.TgZ(6,"div",4),e.YNc(7,h,5,0,"ng-container",5),e.YNc(8,R,42,9,"form",6),e.qZA()()()()),2&t&&(e.Q6J("@routerTransition",void 0),e.xp6(1),e.Q6J("previousHeading","Employees")("previousLink","employees")("heading","Add | Edit Employee"),e.xp6(1),e.Q6J("@routerTransition",void 0),e.xp6(5),e.Q6J("ngIf",o.isLoading),e.xp6(1),e.Q6J("ngIf",!o.isLoading))},dependencies:[l.sg,l.O5,m.rH,a._Y,a.YN,a.Kr,a.Fj,a.EJ,a.JJ,a.JL,a.sg,a.u,u.q],data:{animation:[(0,f.Z9)()]}}),r})();var V=n(7579),$=n(8372),K=n(1884);let U=(()=>{class r{constructor(){this.direction="",this.sort=new e.vpe}ngOnChanges(t){this.sortable!==t?.oldColumn?.currentValue&&t?.oldColumn?.currentValue!==t?.oldColumn?.previousValue&&(this.direction="")}rotate(){this.sortable&&(this.direction="asc"===this.direction?"desc":"desc"===this.direction?"":"asc",this.sort.emit({column:this.sortable,direction:this.direction}))}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275dir=e.lG2({type:r,selectors:[["th","sortable",""]],hostVars:4,hostBindings:function(t,o){1&t&&e.NdJ("click",function(){return o.rotate()}),2&t&&e.ekj("asc","asc"===o.direction)("desc","desc"===o.direction)},inputs:{sortable:"sortable",oldColumn:"oldColumn",direction:"direction"},outputs:{sort:"sort"},exportAs:["NgbdSortableHeader"],features:[e.TTD]}),r})();var z=n(4891),G=n(4304),S=n(6393);function j(r,s){1&r&&(e.TgZ(0,"button",13),e._uU(1,"Add Employee"),e.qZA())}function W(r,s){1&r&&(e.ynx(0),e.TgZ(1,"div",14)(2,"div",15)(3,"span",16),e._uU(4,"Loading..."),e.qZA()()(),e.BQk())}function X(r,s){1&r&&(e.TgZ(0,"div")(1,"p",14),e._uU(2,"No users found"),e.qZA()())}function ee(r,s){1&r&&(e.TgZ(0,"th",28),e._uU(1,"Active"),e.qZA())}function te(r,s){1&r&&(e.TgZ(0,"th",28),e._uU(1,"Edit"),e.qZA())}function re(r,s){1&r&&(e.TgZ(0,"th",28),e._uU(1,"Delete"),e.qZA())}function oe(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"label",31)(1,"input",32),e.NdJ("click",function(){e.CHM(t);const d=e.oxw(2).$implicit,c=e.oxw(3);return e.KtG(c.updateStatus(d.id,d.isActive))}),e.qZA(),e._UZ(2,"span",33),e.qZA()}}function ne(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"label",31)(1,"input",34),e.NdJ("click",function(){e.CHM(t);const d=e.oxw(2).$implicit,c=e.oxw(3);return e.KtG(c.updateStatus(d.id,d.isActive))}),e.qZA(),e._UZ(2,"span",33),e.qZA()}}function ie(r,s){if(1&r&&(e.TgZ(0,"td"),e.YNc(1,oe,3,0,"label",30),e.YNc(2,ne,3,0,"label",30),e.qZA()),2&r){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",t.isActive),e.xp6(1),e.Q6J("ngIf",!t.isActive)}}function se(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"td")(1,"div",35)(2,"button",36),e.NdJ("click",function(){e.CHM(t);const d=e.oxw().$implicit,c=e.oxw(3);return e.KtG(c.editUser(d.id))}),e._UZ(3,"img",37),e.qZA()()()}}function ae(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"td")(1,"div",35)(2,"button",36),e.NdJ("click",function(){e.CHM(t);const d=e.oxw().$implicit,c=e.oxw(3);return e.KtG(c.deleteUser(d.id))}),e._UZ(3,"img",38),e.qZA()()()}}const le=function(r){return["view-employee",r]};function de(r,s){if(1&r&&(e.TgZ(0,"tr")(1,"td")(2,"a",29),e._uU(3),e.qZA()(),e.TgZ(4,"td"),e._uU(5),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.qZA(),e.YNc(8,ie,3,2,"td",10),e.YNc(9,se,4,0,"td",10),e.YNc(10,ae,4,0,"td",10),e.qZA()),2&r){const t=s.$implicit,o=e.oxw(3);e.xp6(2),e.Q6J("routerLink",e.VKq(7,le,t.id)),e.xp6(1),e.hij(" ",null==t?null:t.name," "),e.xp6(2),e.Oqu(null==t?null:t.email),e.xp6(2),e.Oqu(null==t||null==t.role?null:t.role.name),e.xp6(1),e.Q6J("ngIf",o.isEditAccess),e.xp6(1),e.Q6J("ngIf",o.isEditAccess),e.xp6(1),e.Q6J("ngIf",o.isEditAccess)}}const ce=function(){return{standalone:!0}};function me(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"div")(1,"div",17)(2,"table",18)(3,"thead")(4,"tr")(5,"th",19),e.NdJ("sort",function(d){e.CHM(t);const c=e.oxw(2);return e.KtG(c.onSort(d))}),e._uU(6,"Name"),e.qZA(),e.TgZ(7,"th",20),e.NdJ("sort",function(d){e.CHM(t);const c=e.oxw(2);return e.KtG(c.onSort(d))}),e._uU(8,"Email"),e.qZA(),e.TgZ(9,"th",21),e.NdJ("sort",function(d){e.CHM(t);const c=e.oxw(2);return e.KtG(c.onSort(d))}),e._uU(10,"Role"),e.qZA(),e.YNc(11,ee,2,0,"th",22),e.YNc(12,te,2,0,"th",22),e.YNc(13,re,2,0,"th",22),e.qZA()(),e.TgZ(14,"tbody"),e.YNc(15,de,11,9,"tr",23),e.qZA()(),e.TgZ(16,"div",24)(17,"ngb-pagination",25),e.NdJ("pageChange",function(d){e.CHM(t);const c=e.oxw(2);return e.KtG(c._state.page=d)})("pageChange",function(){e.CHM(t);const d=e.oxw(2);return e.KtG(d.refreshStaff())}),e.qZA(),e.TgZ(18,"select",26),e.NdJ("ngModelChange",function(d){e.CHM(t);const c=e.oxw(2);return e.KtG(c._state.limit=d)})("ngModelChange",function(){e.CHM(t);const d=e.oxw(2);return e.KtG(d.refreshStaff())}),e.TgZ(19,"option",27),e._uU(20,"10 items per page"),e.qZA(),e.TgZ(21,"option",27),e._uU(22,"20 items per page"),e.qZA(),e.TgZ(23,"option",27),e._uU(24,"30 items per page"),e.qZA()()()()()}if(2&r){const t=e.oxw(2);e.xp6(5),e.Q6J("oldColumn",t._state.sortColumn),e.xp6(2),e.Q6J("oldColumn",t._state.sortColumn),e.xp6(2),e.Q6J("oldColumn",t._state.sortColumn),e.xp6(2),e.Q6J("ngIf",t.isEditAccess),e.xp6(1),e.Q6J("ngIf",t.isEditAccess),e.xp6(1),e.Q6J("ngIf",t.isEditAccess),e.xp6(2),e.Q6J("ngForOf",t.users),e.xp6(2),e.Q6J("collectionSize",t._state.totalResults)("page",t._state.page)("pageSize",t._state.limit)("rotate",!0)("maxSize",5)("boundaryLinks",!0),e.xp6(1),e.Q6J("ngModel",t._state.limit)("ngModelOptions",e.DdM(18,ce)),e.xp6(1),e.Q6J("ngValue",10),e.xp6(2),e.Q6J("ngValue",20),e.xp6(2),e.Q6J("ngValue",30)}}function ue(r,s){if(1&r&&e.YNc(0,me,25,19,"div",10),2&r){const t=e.oxw();e.Q6J("ngIf",!t.isLoading)}}let I=(()=>{class r{constructor(t,o,d,c,x){this.router=t,this.staffsService=o,this.jwtService=d,this.cdr=c,this.confirmationDialogService=x,this.users=[],this.searchTerm="",this.searchTermUpdate=new V.x,this.isLoading=!1,this.isUsers=!0,this._state={page:1,limit:20,totalPages:1,totalResults:0,searchTerm:"",sortColumn:"createdAt",sortDirection:"desc"},this.isEditAccess=!1,this.searchTermUpdate.pipe((0,$.b)(200),(0,K.x)()).subscribe(A=>{this._state.searchTerm=A,this.getStaffMembers(this._state)})}ngOnInit(){this.isLoading=!0,this.isEditAccess=this.jwtService.checkAccess("employees"),this.getStaffMembers(this._state)}getStaffMembers(t){this.staffsService.getStaffs(t).subscribe(o=>{o&&o.results&&(this.users=o.results,this.isUsers=0!=this.users.length,this.setState(o),this.isLoading=!1),this.cdr.detectChanges()},o=>{this.isLoading=!1})}refreshStaff(){this.getStaffMembers(this._state)}setState(t){this._state.page=t.page,this._state.limit=t.limit,this._state.totalPages=t.totalPages,this._state.totalResults=t.totalResults}editUser(t){this.router.navigate(["/employees/edit-employee/"+t])}updateStatus(t,o){this.staffsService.updateMember(t,{isActive:!o}).subscribe(c=>{c&&this.refreshStaff()})}deleteUser(t){this.confirmationDialogService.confirm("Please confirm..","Do you really want to delete this user ?").then(o=>{o&&this.staffsService.deleteUser(t).subscribe(d=>{this.getStaffMembers(this._state)})})}onSort({column:t,direction:o}){console.log(t,o),this.sortedColumn=t,this.sortedDirection=o,this._state.sortColumn=t,this._state.sortDirection=o,this.getStaffMembers(this._state)}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(m.F0),e.Y36(_.x),e.Y36(z.T),e.Y36(e.sBO),e.Y36(G.O))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-staff-members"]],viewQuery:function(t,o){if(1&t&&e.Gf(U,5),2&t){let d;e.iGM(d=e.CRH())&&(o.headers=d)}},decls:16,vars:8,consts:[[3,"heading"],[1,"container-fluid","mt-2"],[1,"card"],[1,"card-body"],[1,"row","mb-2","search-header"],[1,"col-md-10","text-left","mb-1","mb-sm-0"],[1,"form-group","mb-1"],["type","text","type","text","name","searchTerm","id","userstaffs","placeholder","Search here...",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-md-2","text-center"],["type","button","routerLink","/employees/add-employee","class","btn btn-primary btn-block",4,"ngIf"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["table",""],["type","button","routerLink","/employees/add-employee",1,"btn","btn-primary","btn-block"],[1,"text-center"],["role","status",1,"spinner-border"],[1,"sr-only"],[1,"table-responsive"],[1,"table","table-striped"],["scope","col","sortable","name",3,"oldColumn","sort"],["scope","col","sortable","email",3,"oldColumn","sort"],["scope","col","sortable","role",3,"oldColumn","sort"],["scope","col",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between","p-2"],[3,"collectionSize","page","pageSize","rotate","maxSize","boundaryLinks","pageChange"],[1,"custom-select",2,"width","auto",3,"ngModel","ngModelOptions","ngModelChange"],[3,"ngValue"],["scope","col"],[3,"routerLink"],["class","switch",4,"ngIf"],[1,"switch"],["type","checkbox","checked","",3,"click"],[1,"slider","round"],["type","checkbox",3,"click"],[1,"action-buttons"],[3,"click"],["src","assets/images/pencil.svg","alt",""],["src","assets/images/icons8-trash-can.svg","alt",""]],template:function(t,o){if(1&t&&(e.TgZ(0,"div"),e._UZ(1,"app-page-header",0),e.TgZ(2,"div",1)(3,"div",2)(4,"div",3)(5,"form")(6,"div",4)(7,"div",5)(8,"div",6)(9,"input",7),e.NdJ("ngModelChange",function(c){return o._state.searchTerm=c})("ngModelChange",function(c){return o.searchTermUpdate.next(c)}),e.qZA()()(),e.TgZ(10,"div",8),e.YNc(11,j,2,0,"button",9),e.qZA()(),e.YNc(12,W,5,0,"ng-container",10),e.YNc(13,X,3,0,"div",11),e.YNc(14,ue,1,1,"ng-template",null,12,e.W1O),e.qZA()()()()()),2&t){const d=e.MAs(15);e.Q6J("@routerTransition",void 0),e.xp6(1),e.Q6J("heading","Employees"),e.xp6(1),e.Q6J("@routerTransition",void 0),e.xp6(7),e.Q6J("ngModel",o._state.searchTerm),e.xp6(2),e.Q6J("ngIf",o.isEditAccess),e.xp6(1),e.Q6J("ngIf",o.isLoading),e.xp6(1),e.Q6J("ngIf",!o.isUsers)("ngIfElse",d)}},dependencies:[l.sg,l.O5,m.rH,m.yS,a._Y,a.YN,a.Kr,a.Fj,a.EJ,a.JJ,a.JL,u.q,a.On,a.F,S.N9,U],styles:['th[sortable][_ngcontent-%COMP%]{cursor:pointer;-moz-user-select:none;user-select:none;-webkit-user-select:none}th[sortable].desc[_ngcontent-%COMP%]:before, th[sortable].asc[_ngcontent-%COMP%]:before{content:"";display:block;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAAmxJREFUeAHtmksrRVEUx72fH8CIGQNJkpGUUmakDEiZSJRIZsRQmCkTJRmZmJgQE0kpX0D5DJKJgff7v+ru2u3O3vvc67TOvsdatdrnnP1Y///v7HvvubdbUiIhBISAEBACQkAICAEhIAQ4CXSh2DnyDfmCPEG2Iv9F9MPlM/LHyAecdyMzHYNwR3fdNK/OH9HXl1UCozD24TCvILxizEDWIEzA0FcM8woCgRrJCoS5PIwrANQSMAJX1LEI9bqpQo4JYNFFKRSvIgsxHDVnqZgIkPnNBM0rIGtYk9YOOsqgbgepRCfdbmFtqhFkVEDVPjJp0+Z6e6hRHhqBKgg6ZDCvYBygVmUoEGoh5JTRvIJwhJo1aUOoh4CLPMyvxxi7EWOMgnCGsXXI1GIXlZUYX7ucU+kbR8NW8lh3O7cue0Pk32MKndfUxQFAwxdirk3fHappAnc0oqDPzDfGTBrCfHP04dM4oTV8cxr0SVzH9FF07xD3ib6xCDE+M+aUcVygtWzzbtGX2rPBrEUYfecfQkaFzYi6HjVnGBdtL7epqAlc1+jRdAap74RrnPc4BCijttY2tRcdN0g17w7HqZrXhdJTYAuS3hd8z+vKgK3V1zWPae0mZDMykadBn1hTQBLnZNwVrJpSe/NwEeDsEwCctEOsJTsgxLvCqUl2ACftEGvJDgjxrnBqkh3ASTvEWrIDQrwrnJpkB3DSDrGW7IAQ7wqnJtkBnLRztejXXVu4+mxz/nQ9jR1w5VB86ejLTFcnnDwhzV+F6T+CHZlx6THSjn76eyyBIOPHyDakhBAQAkJACAgBISAEhIAQYCLwC8JxpAmsEGt6AAAAAElFTkSuQmCC) no-repeat;background-size:22px;width:22px;height:22px;float:right}th[sortable].desc[_ngcontent-%COMP%]:before{transform:rotate(180deg);-ms-transform:rotate(180deg)}'],data:{animation:[(0,f.Z9)()]}}),r})();var _e=n(7253);function pe(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"button",7),e.NdJ("click",function(){e.CHM(t);const d=e.oxw();return e.KtG(d.editUser(d.userDetails.id))}),e._uU(1,"Edit"),e.qZA()}}function fe(r,s){1&r&&(e.ynx(0),e.TgZ(1,"div",8)(2,"div",9)(3,"span",10),e._uU(4,"Loading..."),e.qZA()()(),e.BQk())}function ge(r,s){if(1&r&&(e.ynx(0),e.TgZ(1,"div",11)(2,"div",12)(3,"label",13),e._uU(4,"Name:"),e.qZA(),e.TgZ(5,"label",13),e._uU(6),e.qZA()(),e.TgZ(7,"div",12)(8,"label",13),e._uU(9,"Email:"),e.qZA(),e.TgZ(10,"label",13),e._uU(11),e.qZA()(),e.TgZ(12,"div",12)(13,"label",13),e._uU(14,"Role:"),e.qZA(),e.TgZ(15,"label",13),e._uU(16),e.qZA()(),e.TgZ(17,"div",12)(18,"label",13),e._uU(19,"Profile:"),e.qZA(),e.TgZ(20,"label",13),e._uU(21),e.ALo(22,"titlecase"),e.qZA()(),e.TgZ(23,"div",12)(24,"label",13),e._uU(25,"Created:"),e.qZA(),e.TgZ(26,"label",13),e._uU(27),e.ALo(28,"date"),e.qZA()()(),e.BQk()),2&r){const t=e.oxw();e.xp6(6),e.Oqu(null==t.userDetails?null:t.userDetails.name),e.xp6(5),e.Oqu(null==t.userDetails?null:t.userDetails.email),e.xp6(5),e.Oqu(null==t.userDetails||null==t.userDetails.role?null:t.userDetails.role.name),e.xp6(5),e.Oqu(e.lcZ(22,5,null==t.userDetails?null:t.userDetails.profile)),e.xp6(6),e.Oqu(e.xi3(28,7,null==t.userDetails?null:t.userDetails.createdAt,"medium"))}}const he=[{path:"",component:I},{path:"add-employee",component:E},{path:"edit-employee/:userId",component:E},{path:"view-employee/:userId",component:(()=>{class r{constructor(t,o,d,c,x){this.route=t,this.staffsService=o,this.cdr=d,this.jwtService=c,this.router=x,this.isEditAccess=!1,this.route.params.subscribe(A=>{""!==A.userId&&null!=A.userId&&(this.userId=A.userId,this.getStaff(this.userId))})}ngOnInit(){this.isEditAccess=this.jwtService.checkAccess("employees")}getStaff(t){this.isLoading=!0,this.staffsService.getStaffById(t).subscribe(o=>{this.userDetails=o,console.log(this.userDetails),this.isLoading=!1,this.cdr.detectChanges()},o=>{this.isLoading=!1,this.router.navigate(["/employees"])})}editUser(t){this.router.navigate(["/employees/edit-employee/"+t])}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(m.gz),e.Y36(_.x),e.Y36(e.sBO),e.Y36(_e.Tj),e.Y36(m.F0))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-view-member"]],decls:10,vars:8,consts:[[3,"previousHeading","previousLink","heading"],[1,"container-fluid","mt-2"],[1,"card"],[1,"card-header"],["style","float: right;","class","btn btn-info",3,"click",4,"ngIf"],[1,"card-body"],[4,"ngIf"],[1,"btn","btn-info",2,"float","right",3,"click"],[1,"text-center"],["role","status",1,"spinner-border"],[1,"sr-only"],[1,"container"],[1,"form-group"],[1,"col-md-4"]],template:function(t,o){1&t&&(e.TgZ(0,"div"),e._UZ(1,"app-page-header",0),e.TgZ(2,"div",1)(3,"div",2)(4,"div",3),e._uU(5," Employee Details "),e.YNc(6,pe,2,0,"button",4),e.qZA(),e.TgZ(7,"div",5),e.YNc(8,fe,5,0,"ng-container",6),e.YNc(9,ge,29,10,"ng-container",6),e.qZA()()()()),2&t&&(e.Q6J("@routerTransition",void 0),e.xp6(1),e.Q6J("previousHeading","Employees")("previousLink","employees")("heading","View Employee"),e.xp6(1),e.Q6J("@routerTransition",void 0),e.xp6(4),e.Q6J("ngIf",o.isEditAccess),e.xp6(2),e.Q6J("ngIf",o.isLoading),e.xp6(1),e.Q6J("ngIf",!o.isLoading))},dependencies:[l.O5,u.q,l.rS,l.uU],data:{animation:[(0,f.Z9)()]}}),r})()}];let ve=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[m.Bz.forChild(he),m.Bz]}),r})();var be=n(4336);let Ae=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({providers:[_.x],imports:[l.ez,ve,a.UX,be.$n,a.u5,S.ZS,S.jF]}),r})()},4903:(v,g,n)=>{n.d(g,{Z9:()=>m});var l=n(7340);function m(){return function a(){return(0,l.X$)("routerTransition",[])}()}},4336:(v,g,n)=>{n.d(g,{$n:()=>l.$});var l=n(2956);n(110),n(1880)},8161:(v,g,n)=>{n.d(g,{q:()=>p});var l=n(4650),m=n(6895),a=n(7750);const f=function(_){return["/",_]};function e(_,i){if(1&_&&(l.TgZ(0,"li",6)(1,"a",7),l._uU(2),l.qZA()()),2&_){const u=l.oxw();l.xp6(1),l.Q6J("routerLink",l.VKq(2,f,u.previousLink)),l.xp6(1),l.Oqu(u.previousHeading)}}let p=(()=>{class _{constructor(){this.previousLink=decodeURIComponent(this.previousLink)}ngOnInit(){}}return _.\u0275fac=function(u){return new(u||_)},_.\u0275cmp=l.Xpm({type:_,selectors:[["app-page-header"]],inputs:{previousHeading:"previousHeading",previousLink:"previousLink",heading:"heading",previoudIcon:"previoudIcon",icon:"icon"},decls:9,vars:6,consts:[[1,"row"],[1,"col-xl-12"],[1,"page-header"],[1,"breadcrumb"],["class","breadcrumb-item",4,"ngIf"],[1,"breadcrumb-item","active"],[1,"breadcrumb-item"],["href","Javascript:void(0)",3,"routerLink"]],template:function(u,h){1&u&&(l.TgZ(0,"div",0)(1,"div",1)(2,"h2",2),l._uU(3),l.qZA(),l.TgZ(4,"ol",3),l.YNc(5,e,3,4,"li",4),l.TgZ(6,"li",5),l._UZ(7,"i"),l._uU(8),l.qZA()()()()),2&u&&(l.xp6(3),l.hij(" ",h.heading," "),l.xp6(2),l.Q6J("ngIf",h.previousHeading),l.xp6(2),l.Gre("fa ",h.icon,""),l.xp6(1),l.hij(" ",h.heading,""))},dependencies:[m.O5,a.yS],styles:[".breadcrumb[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;margin-bottom:0;list-style:none;padding:7px 0 0 22px}.breadcrumb-item[_ngcontent-%COMP%]{color:#773784}.breadcrumb-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none!important;color:#773784}.breadcrumb-item.active[_ngcontent-%COMP%]{color:#773784}.breadcrumb[_ngcontent-%COMP%]   .breadcrumb-item[_ngcontent-%COMP%]:first-child   i[_ngcontent-%COMP%]{margin-right:1rem}@media (max-width: 768px){.breadcrumb-item.active[_ngcontent-%COMP%]{color:#773784}}"]}),_})()},2956:(v,g,n)=>{n.d(g,{$:()=>f});var l=n(6895),m=n(7750),a=n(4650);let f=(()=>{class e{}return e.\u0275fac=function(_){return new(_||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({imports:[l.ez,m.Bz]}),e})()},110:(v,g,n)=>{n.d(g,{o:()=>a});var l=n(6895),m=n(4650);let a=(()=>{class f{}return f.\u0275fac=function(p){return new(p||f)},f.\u0275mod=m.oAB({type:f}),f.\u0275inj=m.cJS({imports:[l.ez]}),f})()},7253:(v,g,n)=>{n.d(g,{Tj:()=>m.T}),n(6256);var m=n(4891)},8372:(v,g,n)=>{n.d(g,{b:()=>f});var l=n(4049),m=n(4482),a=n(5403);function f(e,p=l.z){return(0,m.e)((_,i)=>{let u=null,h=null,T=null;const C=()=>{if(u){u.unsubscribe(),u=null;const b=h;h=null,i.next(b)}};function M(){const b=T+e,Z=p.now();if(Z<b)return u=this.schedule(void 0,b-Z),void i.add(u);C()}_.subscribe((0,a.x)(i,b=>{h=b,T=p.now(),u||(u=p.schedule(M,e),i.add(u))},()=>{C(),i.complete()},void 0,()=>{h=u=null}))})}}}]);