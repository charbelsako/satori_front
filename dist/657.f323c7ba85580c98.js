"use strict";(self.webpackChunktest_ng7=self.webpackChunktest_ng7||[]).push([[657,161],{5657:(v,u,s)=>{s.r(u),s.d(u,{TimeKeeperModule:()=>L});var i=s(6895),_=s(7750),f=s(4221),d=s(4903),h=s(2558),a=s(7579),m=s(8372),g=s(1884),e=s(4650),T=s(2340),K=s(529),b=s(2487);let x=(()=>{class n{constructor(t,o){this.http=t,this.apiService=o,this.url=T.N.backendUrl}getTimeKeepers(t){return this.apiService.get(""==t.searchTerm?`/timekeepers?sortBy=${t.sortColumn+":"+t.sortDirection}&limit=${t.limit}&page=${t.page}`:`/timekeepers?sortBy=${t.sortColumn+":"+t.sortDirection}&limit=${t.limit}&page=${t.page}&search=${t.searchTerm}`)}getTimeKeeperForExcelDownload(t){return this.apiService.getBlob(""==t.searchTerm?"/timekeepers/download?sortBy="+t.sortColumn+":"+t.sortDirection:`/timekeepers/download?sortBy=${t.sortColumn+":"+t.sortDirection}&search=${t.searchTerm}`)}getDeletedTimeKeepers(t){return this.apiService.get(""==t.searchTerm?`/timekeepers?isDelete=true&sortBy=${t.sortColumn+":"+t.sortDirection}&limit=${t.limit}&page=${t.page}`:`/timekeepers?isDelete=true&sortBy=${t.sortColumn+":"+t.sortDirection}&limit=${t.limit}&page=${t.page}&search=${t.searchTerm}`)}getTimeKeeperCSV(){return this.apiService.get("/timekeepers/bulk/csv/data")}getTimeKeeperById(t){return this.apiService.get(`/timekeepers/${t}`)}addNewTimeKeeper(t){return this.apiService.post("/timekeepers",t)}updateTimeKeeper(t,o){return this.apiService.patch(`/timekeepers/${t}`,o)}deleteTimeKeeper(t){return this.apiService.delete("/timekeepers/"+t)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(K.eN),e.LFG(b.s))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var C=s(4304),p=s(4006),S=s(8161),Z=s(6393);const A={asc:"desc",desc:"asc","":"asc"};let M=(()=>{class n{constructor(){this.direction="",this.sort=new e.vpe}ngOnChanges(t){this.sortable!==t?.oldColumn?.currentValue&&t?.oldColumn?.currentValue!==t?.oldColumn?.previousValue&&(this.direction="")}rotate(){this.direction=A[this.direction],this.sort.emit({column:this.sortable,direction:this.direction})}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=e.lG2({type:n,selectors:[["th","sortable",""]],hostVars:4,hostBindings:function(t,o){1&t&&e.NdJ("click",function(){return o.rotate()}),2&t&&e.ekj("asc","asc"===o.direction)("desc","desc"===o.direction)},inputs:{sortable:"sortable",oldColumn:"oldColumn",direction:"direction"},outputs:{sort:"sort"},exportAs:["NgbdSortableHeader"],features:[e.TTD]}),n})();function O(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"div",12)(1,"button",13),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.downloadFileExcel())}),e._uU(2,"Download"),e.qZA()()}}function y(n,c){1&n&&(e.ynx(0),e.TgZ(1,"div",14)(2,"div",15)(3,"span",16),e._uU(4,"Loading..."),e.qZA()()(),e.BQk())}function J(n,c){1&n&&(e.TgZ(0,"div")(1,"p",14),e._uU(2,"No timekeeper found"),e.qZA()())}function U(n,c){if(1&n&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.qZA(),e.TgZ(15,"td"),e._uU(16),e.qZA()()),2&n){const t=c.$implicit;e.xp6(2),e.Oqu(null==t?null:t.timekeeperId),e.xp6(2),e.Oqu(null==t?null:t.name),e.xp6(2),e.Oqu(null==t?null:t.timekeeperNumber),e.xp6(2),e.Oqu(null==t?null:t.office),e.xp6(2),e.Oqu(null==t?null:t.department),e.xp6(2),e.Oqu(null==t?null:t.section),e.xp6(2),e.Oqu(null==t?null:t.title),e.xp6(2),e.Oqu(null==t?null:t.rateClass)}}const N=function(){return{standalone:!0}};function H(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"div",17)(2,"table",18)(3,"thead")(4,"tr")(5,"th",19),e.NdJ("sort",function(r){e.CHM(t);const l=e.oxw(2);return e.KtG(l.onSort(r))}),e._uU(6,"ID"),e.qZA(),e.TgZ(7,"th",20),e.NdJ("sort",function(r){e.CHM(t);const l=e.oxw(2);return e.KtG(l.onSort(r))}),e._uU(8,"Name"),e.qZA(),e.TgZ(9,"th",21),e.NdJ("sort",function(r){e.CHM(t);const l=e.oxw(2);return e.KtG(l.onSort(r))}),e._uU(10,"Number"),e.qZA(),e.TgZ(11,"th",22),e.NdJ("sort",function(r){e.CHM(t);const l=e.oxw(2);return e.KtG(l.onSort(r))}),e._uU(12,"Office"),e.qZA(),e.TgZ(13,"th",23),e.NdJ("sort",function(r){e.CHM(t);const l=e.oxw(2);return e.KtG(l.onSort(r))}),e._uU(14,"Department"),e.qZA(),e.TgZ(15,"th",24),e.NdJ("sort",function(r){e.CHM(t);const l=e.oxw(2);return e.KtG(l.onSort(r))}),e._uU(16,"Section"),e.qZA(),e.TgZ(17,"th",25),e.NdJ("sort",function(r){e.CHM(t);const l=e.oxw(2);return e.KtG(l.onSort(r))}),e._uU(18,"Title"),e.qZA(),e.TgZ(19,"th",26),e.NdJ("sort",function(r){e.CHM(t);const l=e.oxw(2);return e.KtG(l.onSort(r))}),e._uU(20,"Rate Class"),e.qZA()()(),e.TgZ(21,"tbody"),e.YNc(22,U,17,8,"tr",27),e.qZA()(),e.TgZ(23,"div",28)(24,"ngb-pagination",29),e.NdJ("pageChange",function(r){e.CHM(t);const l=e.oxw(2);return e.KtG(l._state.page=r)})("pageChange",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.refreshTimeKeepers())}),e.qZA(),e.TgZ(25,"select",30),e.NdJ("ngModelChange",function(r){e.CHM(t);const l=e.oxw(2);return e.KtG(l._state.limit=r)})("ngModelChange",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.refreshTimeKeepers())}),e.TgZ(26,"option",31),e._uU(27,"10 items per page"),e.qZA(),e.TgZ(28,"option",31),e._uU(29,"20 items per page"),e.qZA(),e.TgZ(30,"option",31),e._uU(31,"30 items per page"),e.qZA()()()()()}if(2&n){const t=e.oxw(2);e.xp6(5),e.Q6J("oldColumn",t._state.sortColumn),e.xp6(2),e.Q6J("oldColumn",t._state.sortColumn),e.xp6(2),e.Q6J("oldColumn",t._state.sortColumn),e.xp6(2),e.Q6J("oldColumn",t._state.sortColumn),e.xp6(2),e.Q6J("oldColumn",t._state.sortColumn),e.xp6(2),e.Q6J("oldColumn",t._state.sortColumn),e.xp6(2),e.Q6J("oldColumn",t._state.sortColumn),e.xp6(2),e.Q6J("oldColumn",t._state.sortColumn),e.xp6(3),e.Q6J("ngForOf",t.timeKeepers),e.xp6(2),e.Q6J("collectionSize",t._state.totalResults)("page",t._state.page)("pageSize",t._state.limit)("rotate",!0)("maxSize",5)("boundaryLinks",!0),e.xp6(1),e.Q6J("ngModel",t._state.limit)("ngModelOptions",e.DdM(20,N)),e.xp6(1),e.Q6J("ngValue",10),e.xp6(2),e.Q6J("ngValue",20),e.xp6(2),e.Q6J("ngValue",30)}}function D(n,c){if(1&n&&e.YNc(0,H,32,21,"div",9),2&n){const t=e.oxw();e.Q6J("ngIf",!t.isLoading)}}const E=[{path:"",component:(()=>{class n{constructor(t,o,r,l){this.router=t,this.timeKeeperService=o,this.cdr=r,this.confirmationDialogService=l,this.timeKeepers=[],this.searchTerm="",this.searchTermUpdate=new a.x,this.isLoading=!1,this.isTimeKeepers=!0,this._state={page:1,limit:20,totalPages:1,totalResults:0,searchTerm:"",sortColumn:"createdAt",sortDirection:"desc"},this.searchTermUpdate.pipe((0,m.b)(200),(0,g.x)()).subscribe(B=>{this._state.searchTerm=B,this.getAllTimeKeepers(this._state)})}ngOnInit(){this.isLoading=!0,this.getAllTimeKeepers(this._state)}onSort({column:t,direction:o}){this.sortedColumn=t,this.sortedDirection=o,this._state.sortColumn=t,this._state.sortDirection=o,this.getAllTimeKeepers(this._state)}downloadFileExcel(){return this.timeKeeperService.getTimeKeeperForExcelDownload(this._state).subscribe(t=>{(0,h.S)(t,"time-keeper")},t=>{})}getAllTimeKeepers(t){this.timeKeeperService.getTimeKeepers(t).subscribe(o=>{this.timeKeepers=o.results,this.isTimeKeepers=0!=this.timeKeepers.length,this.setState(o),this.isLoading=!1},o=>{this.isLoading=!1})}refreshTimeKeepers(){this.getAllTimeKeepers(this._state)}setState(t){this._state.page=t.page,this._state.limit=t.limit,this._state.totalPages=t.totalPages,this._state.totalResults=t.totalResults}editTimeKeeper(t){this.router.navigate(["/timeKeepers/edit-timeKeeper/"+t])}updateStatus(t,o){this.timeKeeperService.updateTimeKeeper(t,{isActive:!o}).subscribe(l=>{l&&this.refreshTimeKeepers()})}updateFavorite(t,o){this.timeKeeperService.updateTimeKeeper(t,{isFavorite:!o}).subscribe(l=>{l&&this.refreshTimeKeepers()})}deleteTimeKeeper(t){this.confirmationDialogService.confirm("Please confirm..","Do you really want to delete this timeKeeper ?").then(o=>{o&&this.timeKeeperService.deleteTimeKeeper(t).subscribe(r=>{this.getAllTimeKeepers(this._state)})})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(_.F0),e.Y36(x),e.Y36(e.sBO),e.Y36(C.O))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-time-keeper"]],viewQuery:function(t,o){if(1&t&&e.Gf(f.j,5),2&t){let r;e.iGM(r=e.CRH())&&(o.headers=r)}},decls:15,vars:8,consts:[[3,"heading"],[1,"container-fluid","mt-2"],[1,"card"],[1,"card-body"],[1,"row","mb-2","search-header"],[1,"col-md-10","text-left","mb-1","mb-md-0"],[1,"form-group","mb-1"],["type","text","type","text","name","searchTerm","id","timeKeeperstaffs","placeholder","Search here...",1,"form-control",3,"ngModel","ngModelChange"],["class","col-md-2 text-center",4,"ngIf"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["table",""],[1,"col-md-2","text-center"],["type","button",1,"btn","btn-primary","btn-block",3,"click"],[1,"text-center"],["role","status",1,"spinner-border"],[1,"sr-only"],[1,"table-responsive"],[1,"table","table-striped"],["scope","col","sortable","timekeeperId",3,"oldColumn","sort"],["scope","col","sortable","name",3,"oldColumn","sort"],["scope","col","sortable","timekeeperNumber",3,"oldColumn","sort"],["scope","col","sortable","office",3,"oldColumn","sort"],["scope","col","sortable","department",3,"oldColumn","sort"],["scope","col","sortable","section",3,"oldColumn","sort"],["scope","col","sortable","title",3,"oldColumn","sort"],["scope","col","sortable","rateClass",3,"oldColumn","sort"],[4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between","p-2"],[3,"collectionSize","page","pageSize","rotate","maxSize","boundaryLinks","pageChange"],[1,"custom-select",2,"width","auto",3,"ngModel","ngModelOptions","ngModelChange"],[3,"ngValue"]],template:function(t,o){if(1&t&&(e.TgZ(0,"div"),e._UZ(1,"app-page-header",0),e.TgZ(2,"div",1)(3,"div",2)(4,"div",3)(5,"form")(6,"div",4)(7,"div",5)(8,"div",6)(9,"input",7),e.NdJ("ngModelChange",function(l){return o._state.searchTerm=l})("ngModelChange",function(l){return o.searchTermUpdate.next(l)}),e.qZA()()(),e.YNc(10,O,3,0,"div",8),e.qZA(),e.YNc(11,y,5,0,"ng-container",9),e.YNc(12,J,3,0,"div",10),e.YNc(13,D,1,1,"ng-template",null,11,e.W1O),e.qZA()()()()()),2&t){const r=e.MAs(14);e.Q6J("@routerTransition",void 0),e.xp6(1),e.Q6J("heading","TimeKeepers"),e.xp6(1),e.Q6J("@routerTransition",void 0),e.xp6(7),e.Q6J("ngModel",o._state.searchTerm),e.xp6(1),e.Q6J("ngIf",!o.isLoading&&o._state.totalResults>0),e.xp6(1),e.Q6J("ngIf",o.isLoading),e.xp6(1),e.Q6J("ngIf",!o.isTimeKeepers)("ngIfElse",r)}},dependencies:[i.sg,i.O5,p._Y,p.YN,p.Kr,p.Fj,p.EJ,p.JJ,p.JL,S.q,p.On,p.F,Z.N9,M],data:{animation:[(0,d.Z9)()]}}),n})()}];let P=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[_.Bz.forChild(E),_.Bz]}),n})();var w=s(486),I=s(1094);let L=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[M,x],imports:[i.ez,P,p.UX,w.$n,p.u5,Z.ZS,Z.jF,I.yI.forRoot()]}),n})()},4221:(v,u,s)=>{s.d(u,{j:()=>i.j});var i=s(8260)},8260:(v,u,s)=>{s.d(u,{j:()=>f});var i=s(4650);const _={asc:"desc",desc:"asc","":"asc"};let f=(()=>{class d{constructor(){this.direction="",this.sort=new i.vpe}ngOnChanges(a){this.sortable!==a?.oldColumn?.currentValue&&a?.oldColumn?.currentValue!==a?.oldColumn?.previousValue&&(this.direction="")}rotate(){this.direction=_[this.direction],this.sort.emit({column:this.sortable,direction:this.direction})}}return d.\u0275fac=function(a){return new(a||d)},d.\u0275dir=i.lG2({type:d,selectors:[["th","sortable",""]],hostVars:4,hostBindings:function(a,m){1&a&&i.NdJ("click",function(){return m.rotate()}),2&a&&i.ekj("asc","asc"===m.direction)("desc","desc"===m.direction)},inputs:{sortable:"sortable",oldColumn:"oldColumn",direction:"direction"},outputs:{sort:"sort"},exportAs:["NgbdSortableHeader"],features:[i.TTD]}),d})()},2558:(v,u,s)=>{s.d(u,{S:()=>i});const i=(_,f="records")=>{const d=new Blob([_],{type:"application/octet-stream"}),h=window.URL.createObjectURL(d);let a=document.createElement("a");a.href=h,a.download=`${f}.xlsx`,document.body.appendChild(a),a.click(),document.body.removeChild(a)}},8161:(v,u,s)=>{s.d(u,{q:()=>a});var i=s(4650),_=s(6895),f=s(7750);const d=function(m){return["/",m]};function h(m,g){if(1&m&&(i.TgZ(0,"li",6)(1,"a",7),i._uU(2),i.qZA()()),2&m){const e=i.oxw();i.xp6(1),i.Q6J("routerLink",i.VKq(2,d,e.previousLink)),i.xp6(1),i.Oqu(e.previousHeading)}}let a=(()=>{class m{constructor(){this.previousLink=decodeURIComponent(this.previousLink)}ngOnInit(){}}return m.\u0275fac=function(e){return new(e||m)},m.\u0275cmp=i.Xpm({type:m,selectors:[["app-page-header"]],inputs:{previousHeading:"previousHeading",previousLink:"previousLink",heading:"heading",previoudIcon:"previoudIcon",icon:"icon"},decls:9,vars:6,consts:[[1,"row"],[1,"col-xl-12"],[1,"page-header"],[1,"breadcrumb"],["class","breadcrumb-item",4,"ngIf"],[1,"breadcrumb-item","active"],[1,"breadcrumb-item"],["href","Javascript:void(0)",3,"routerLink"]],template:function(e,T){1&e&&(i.TgZ(0,"div",0)(1,"div",1)(2,"h2",2),i._uU(3),i.qZA(),i.TgZ(4,"ol",3),i.YNc(5,h,3,4,"li",4),i.TgZ(6,"li",5),i._UZ(7,"i"),i._uU(8),i.qZA()()()()),2&e&&(i.xp6(3),i.hij(" ",T.heading," "),i.xp6(2),i.Q6J("ngIf",T.previousHeading),i.xp6(2),i.Gre("fa ",T.icon,""),i.xp6(1),i.hij(" ",T.heading,""))},dependencies:[_.O5,f.yS],styles:[".breadcrumb[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;margin-bottom:0;list-style:none;padding:7px 0 0 22px}.breadcrumb-item[_ngcontent-%COMP%]{color:#773784}.breadcrumb-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none!important;color:#773784}.breadcrumb-item.active[_ngcontent-%COMP%]{color:#773784}.breadcrumb[_ngcontent-%COMP%]   .breadcrumb-item[_ngcontent-%COMP%]:first-child   i[_ngcontent-%COMP%]{margin-right:1rem}@media (max-width: 768px){.breadcrumb-item.active[_ngcontent-%COMP%]{color:#773784}}"]}),m})()},8372:(v,u,s)=>{s.d(u,{b:()=>d});var i=s(4049),_=s(4482),f=s(5403);function d(h,a=i.z){return(0,_.e)((m,g)=>{let e=null,T=null,K=null;const b=()=>{if(e){e.unsubscribe(),e=null;const C=T;T=null,g.next(C)}};function x(){const C=K+h,p=a.now();if(p<C)return e=this.schedule(void 0,C-p),void g.add(e);b()}m.subscribe((0,f.x)(g,C=>{T=C,K=a.now(),e||(e=a.schedule(x,h),g.add(e))},()=>{b(),g.complete()},void 0,()=>{T=e=null}))})}}}]);