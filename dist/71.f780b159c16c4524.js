"use strict";(self.webpackChunktest_ng7=self.webpackChunktest_ng7||[]).push([[71,161],{6071:(b,f,l)=>{l.r(f),l.d(f,{MatterModule:()=>It});var c=l(6895),m=l(7750),Z=l(4903),g=l(2558),d=l(7579),u=l(8372),_=l(1884),s=l(4221),t=l(4650),T=l(2340),A=l(529),D=l(2487);let U=(()=>{class o{constructor(e,n){this.http=e,this.apiService=n,this.url=T.N.backendUrl}filterQuery(e){let n="";return e.matterName&&(n+="&matterName="+e.matterName),e.matterId&&(n+="&matterId="+e.matterId),e.clientId&&(n+="&clientId="+e.clientId),e.clientName&&(n+="&clientName="+e.clientName),e.status&&(n+="&status="+e.status),e.openDate&&(n+="&openDate="+e.openDate),e.closeDate&&(n+="&closeDate="+e.closeDate),e.lastInvoiceDate&&(n+="&lastInvoiceDate="+e.lastInvoiceDate),e.postDate&&(n+="&postDate="+e.postDate),e.billTkprName&&(n+="&billTkprName="+e.billTkprName),e.rspTkprName&&(n+="&rspTkprName="+e.rspTkprName),n}getMatters(e,n){const i=this.filterQuery(n);return this.apiService.get(""==e.searchTerm?`/matters?sortBy=${e.sortColumn+":"+e.sortDirection}&limit=${e.limit}&page=${e.page}${i}`:`/matters?sortBy=${e.sortColumn+":"+e.sortDirection}&limit=${e.limit}&page=${e.page}&search=${e.searchTerm}${i}`)}getMatterFilteredData(e,n){const i=this.filterQuery(n);return this.apiService.get(""==e.searchTerm?`/matters?sortBy=${e.sortColumn+":"+e.sortDirection}&limit=${e.limit}&page=${e.page}${i}`:`/matters?sortBy=${e.sortColumn+":"+e.sortDirection}&limit=${e.limit}&page=${e.page}&search=${e.searchTerm}${i}`)}getMaterForExcelDownload(e,n){const i=this.filterQuery(n);return this.apiService.getBlob(""==e.searchTerm?`/matters/download?sortBy=${e.sortColumn+":"+e.sortDirection}${i}`:`/matters/download?sortBy=${e.sortColumn+":"+e.sortDirection}&search=${e.searchTerm}${i}`)}getDeletedMatters(e){return this.apiService.get(""==e.searchTerm?`/matters?isDelete=true&sortBy=${e.sortColumn+":"+e.sortDirection}&limit=${e.limit}&page=${e.page}`:`/matters?isDelete=true&sortBy=${e.sortColumn+":"+e.sortDirection}&limit=${e.limit}&page=${e.page}&search=${e.searchTerm}`)}getMatterCSV(){return this.apiService.get("/matters/bulk/csv/data")}getMatterById(e){return this.apiService.get(`/matters/${e}`)}getMatterByIds(e){return this.apiService.post("/matters/matterIds",{matterIds:e})}addNewMatter(e){return this.apiService.post("/matters",e)}updateMatter(e,n){return this.apiService.patch(`/Matter/${e}`,n)}deleteMatter(e){return this.apiService.delete("/Matter/"+e)}getMatterRoster(e,n){return this.apiService.get(`/matterRosters?&sortBy=${e.sortColumn+":"+e.sortDirection}&limit=${e.limit}&page=${e.page}&name=${n}`)}getMatterByColumn(e,n){return this.apiService.get(`/matters/column/${n}?sortBy=${e.sortColumn+":"+e.sortDirection}&search=${e.searchTerm}`)}getClientExceptionData(e){return this.apiService.get(`/clients/get/rate/exception/rate/${e}`)}getMatterExceptionData(e){return this.apiService.get(`/matters/get/matter/exception/rate/${e}`)}getMatterExceptionLevelData(e){return this.apiService.get(`/matters/get/matter/exception/level/${e}`)}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(A.eN),t.LFG(D.s))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var M=l(7090),N=l(4304),v=l(6393),p=l(4006),R=l(9646),y=l(8733),E=l(9300),J=l(3900),L=l(4004),I=l(262),k=l(8505),P=l(6995);const w=["instanceResAtt"],F=["instanceBillAtt"];function $(o,a){if(1&o&&t._UZ(0,"ngb-highlight",28),2&o){const e=a.result,n=a.term,i=t.oxw();t.Q6J("result",i.formatEmployee(e))("term",n)}}function Q(o,a){1&o&&(t.TgZ(0,"div",29)(1,"div",30)(2,"div",4)(3,"div",31)(4,"span",32),t._uU(5,"Loading..."),t.qZA()()()()())}function Y(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"div",33)(1,"div",34)(2,"button",35),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.openMenu())}),t._uU(3,"Filter"),t.qZA()()()}}function B(o,a){if(1&o&&t._UZ(0,"ngb-highlight",28),2&o){const e=a.result,n=a.term,i=t.oxw();t.Q6J("result",i.formatEmployee(e))("term",n)}}function H(o,a){if(1&o&&t._UZ(0,"ngb-highlight",28),2&o){const e=a.result,n=a.term,i=t.oxw();t.Q6J("result",i.formatEmployee(e))("term",n)}}let G=(()=>{class o{constructor(e,n,i,r,C){this.router=e,this.searchService=n,this.cdr=i,this.fb=r,this.matterService=C,this.matterRecords=new t.vpe,this.actionparam={status:"",openDate:"",closeDate:"",lastInvoiceDate:"",postDate:"",billTkprName:"",rspTkprName:""},this.open=!1,this.openClass="",this.loader=!1,this.focusResAtt$=new d.x,this.clickResAtt$=new d.x,this.focusBillAtt$=new d.x,this.clickBillAtt$=new d.x,this._employee={page:1,limit:10,totalPages:1,totalResults:0,searchTerm:"",sortColumn:"createdAt",sortDirection:"asc"},this.searchEmployeeResAtt=x=>x.pipe((0,u.b)(300),(0,_.x)(),(0,y.T)(this.focusResAtt$),(0,y.T)(this.clickResAtt$.pipe((0,E.h)(()=>!this.instanceResAtt.isPopupOpen()))),(0,J.w)(O=>(this._employee.searchTerm=O,this.matterService.getMatterByColumn(this._employee,"rspTkprName").pipe((0,L.U)(h=>h),(0,I.K)(()=>(0,R.of)([]))))),(0,k.b)(()=>this.clientLoading=!1)),this.searchEmployeeBillAtt=x=>x.pipe((0,u.b)(300),(0,_.x)(),(0,y.T)(this.focusBillAtt$),(0,y.T)(this.clickBillAtt$.pipe((0,E.h)(()=>!this.instanceBillAtt.isPopupOpen()))),(0,J.w)(O=>(this._employee.searchTerm=O,this.matterService.getMatterByColumn(this._employee,"billTkprName").pipe((0,L.U)(h=>h),(0,I.K)(()=>(0,R.of)([]))))),(0,k.b)(()=>this.clientLoading=!1))}getFilterValue(){return!!localStorage.getItem("filter_matter_values")&&JSON.parse(localStorage.getItem("filter_matter_values"))}ngOnInit(){this.filterForm=this.fb.group({status:["Open"],openDate:[null],closeDate:[null],lastInvoiceDate:[null],postDate:[null],billTkprName:[null],rspTkprName:[null]})}openMenu(){this.open=!0,this.openClass="slide-in"}closeMenu(){this.openClass="slide-out",this.open=!1}emitValues(){this.matterRecords.emit(this.filterForm.value)}resetEvent(){this.filterForm.patchValue({status:null,openDate:null,closeDate:null,lastInvoiceDate:null,postDate:null,billTkprName:null,rspTkprName:null}),this.emitValues()}selectedResAtt(e){console.log(e);const n={...this.filterForm.value,rspTkprName:e?.item};this.matterRecords.emit(n)}selectedBillAtt(e){console.log(e);const n={...this.filterForm.value,billTkprName:e?.item};this.matterRecords.emit(n)}formatEmployee(e){if("string"==typeof e)return e}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(m.F0),t.Y36(P.o),t.Y36(t.sBO),t.Y36(p.qu),t.Y36(U))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-matter-filter"]],viewQuery:function(e,n){if(1&e&&(t.Gf(w,5),t.Gf(F,5),t.Gf(s.j,5)),2&e){let i;t.iGM(i=t.CRH())&&(n.instanceResAtt=i.first),t.iGM(i=t.CRH())&&(n.instanceBillAtt=i.first),t.iGM(i=t.CRH())&&(n.headers=i)}},inputs:{actionparam:"actionparam"},outputs:{matterRecords:"matterRecords"},decls:64,vars:11,consts:[["responsibleAttorney",""],[1,"parent-slide",3,"ngClass"],["autocomplete","off",1,"form-inline",3,"formGroup"],["id","slider",1,"slide-out"],[1,"position-relative"],[1,"menu-close"],[1,"flex","position-relative"],[1,"filter-buttons"],[1,"btn","btn-outline-secondary",3,"click"],[1,"slide_main_menu"],[1,"slide_header"],[1,"slide_body"],["type","text","formControlName","billTkprName",1,"form-control",3,"ngbTypeahead","resultTemplate","inputFormatter","change","selectItem","focus","click"],["instanceBillAtt","ngbTypeahead"],["type","text","formControlName","rspTkprName",1,"form-control",3,"ngbTypeahead","resultTemplate","inputFormatter","change","selectItem","focus","click"],["instanceResAtt","ngbTypeahead"],["formControlName","status",1,"form-control",3,"change"],["value","Open",3,"selected"],["value","OT"],["value","OD"],["value","D"],["type","date","formControlName","openDate",1,"form-control",3,"change"],["type","date","formControlName","closeDate",1,"form-control",3,"change"],["type","date","formControlName","lastInvoiceDate",1,"form-control",3,"change"],["type","date","formControlName","postDate",1,"form-control",3,"change"],["class","position-absolute loader-overlay",4,"ngIf"],["class","action-button1",4,"ngIf"],["billingAttorneyTemplate",""],[3,"result","term"],[1,"position-absolute","loader-overlay"],[1,"loader"],["role","status",1,"spinner-border"],[1,"sr-only"],[1,"action-button1"],[1,"menu-open"],[1,"btn","btn-primary",3,"click"]],template:function(e,n){if(1&e&&(t.YNc(0,$,1,2,"ng-template",null,0,t.W1O),t.TgZ(2,"div",1)(3,"form",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"div",7)(9,"button",8),t.NdJ("click",function(){return n.resetEvent()}),t._uU(10,"Reset"),t.qZA(),t.TgZ(11,"button",8),t.NdJ("click",function(){return n.closeMenu()}),t._uU(12,"Close Filter"),t.qZA()()(),t.TgZ(13,"div",9)(14,"div",10),t._uU(15,"Billing Attorney"),t.qZA(),t.TgZ(16,"div",11)(17,"input",12,13),t.NdJ("change",function(){return n.emitValues()})("selectItem",function(r){return n.selectedBillAtt(r)})("focus",function(r){return n.focusBillAtt$.next(r.target.value)})("click",function(r){return n.clickBillAtt$.next(r.target.value)}),t.qZA()()(),t.TgZ(19,"div",9)(20,"div",10),t._uU(21,"Responsible Attorney"),t.qZA(),t.TgZ(22,"div",11)(23,"input",14,15),t.NdJ("change",function(){return n.emitValues()})("selectItem",function(r){return n.selectedResAtt(r)})("focus",function(r){return n.focusResAtt$.next(r.target.value)})("click",function(r){return n.clickResAtt$.next(r.target.value)}),t.qZA()()(),t.TgZ(25,"div",9)(26,"div",10),t._uU(27,"Status"),t.qZA(),t.TgZ(28,"div",11)(29,"select",16),t.NdJ("change",function(){return n.emitValues()}),t.TgZ(30,"option",17),t._uU(31,"Open"),t.qZA(),t.TgZ(32,"option",18),t._uU(33,"OT"),t.qZA(),t.TgZ(34,"option",19),t._uU(35,"OD"),t.qZA(),t.TgZ(36,"option",20),t._uU(37,"D"),t.qZA()()()(),t.TgZ(38,"div",9)(39,"div",10),t._uU(40,"Open Date"),t.qZA(),t.TgZ(41,"div",11)(42,"input",21),t.NdJ("change",function(){return n.emitValues()}),t.qZA()()(),t.TgZ(43,"div",9)(44,"div",10),t._uU(45,"Close Date"),t.qZA(),t.TgZ(46,"div",11)(47,"input",22),t.NdJ("change",function(){return n.emitValues()}),t.qZA()()(),t.TgZ(48,"div",9)(49,"div",10),t._uU(50,"Last Bill Date"),t.qZA(),t.TgZ(51,"div",11)(52,"input",23),t.NdJ("change",function(){return n.emitValues()}),t.qZA()()(),t.TgZ(53,"div",9)(54,"div",10),t._uU(55,"Last Time Entry"),t.qZA(),t.TgZ(56,"div",11)(57,"input",24),t.NdJ("change",function(){return n.emitValues()}),t.qZA()()()()(),t.YNc(58,Q,6,0,"div",25),t.qZA()()(),t.YNc(59,Y,4,0,"div",26),t.YNc(60,B,1,2,"ng-template",null,27,t.W1O),t.YNc(62,H,1,2,"ng-template",null,0,t.W1O)),2&e){const i=t.MAs(1),r=t.MAs(61);t.xp6(2),t.Q6J("ngClass",n.openClass),t.xp6(1),t.Q6J("formGroup",n.filterForm),t.xp6(14),t.Q6J("ngbTypeahead",n.searchEmployeeBillAtt)("resultTemplate",r)("inputFormatter",n.formatEmployee),t.xp6(6),t.Q6J("ngbTypeahead",n.searchEmployeeResAtt)("resultTemplate",i)("inputFormatter",n.formatEmployee),t.xp6(7),t.Q6J("selected",!0),t.xp6(28),t.Q6J("ngIf",n.loader),t.xp6(1),t.Q6J("ngIf",!n.open&&!n.loader)}},dependencies:[c.mk,c.O5,p._Y,p.YN,p.Kr,p.Fj,p.EJ,p.JJ,p.JL,p.sg,p.u,v.dR,v._h],styles:["#slider[_ngcontent-%COMP%]{position:absolute;width:340px;height:100%;background:#fff;overflow-x:scroll;padding-bottom:10px;transform:translate(100%);-webkit-transform:translateX(100%);box-shadow:#32325d40 0 50px 100px -20px,#0000004d 0 30px 60px -30px;right:0}#slider[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.slide_main_menu[_ngcontent-%COMP%]{padding:16px;border-bottom:1px solid #ccc}.slide_main_menu[_ngcontent-%COMP%]   .slide_header[_ngcontent-%COMP%]{font-weight:600;margin-bottom:8px;color:#212529}.parent-slide[_ngcontent-%COMP%]{position:fixed;right:0;top:215px;height:92%}.parent-slide.slide-in[_ngcontent-%COMP%]{top:65px}.parent-slide[_ngcontent-%COMP%]   .loader-overlay[_ngcontent-%COMP%]{top:0;width:100%;height:100%;background:#ccc;opacity:.3}.parent-slide[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]{position:fixed;top:50%;right:50%;transform:translate(50%,-50%)}.slide_body[_ngcontent-%COMP%]{gap:10px}.slide-in[_ngcontent-%COMP%]   #slider[_ngcontent-%COMP%]{animation:slide-in .5s forwards;-webkit-animation:slide-in .5s forwards}.menu-open[_ngcontent-%COMP%]{position:absolute;right:28px;top:-78px}.slide-in[_ngcontent-%COMP%]   .menu-open[_ngcontent-%COMP%]{display:none}.menu-open[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:4px 50px;margin:0!important}.slide-out[_ngcontent-%COMP%]   #slider[_ngcontent-%COMP%]{animation:slide-out .5s forwards;-webkit-animation:slide-out .5s forwards}.action-button[_ngcontent-%COMP%]{position:relative;height:-webkit-max-content;height:-moz-max-content;height:max-content}@keyframes slide-in{to{transform:translate(0)}}@-webkit-keyframes slide-in{to{-webkit-transform:translateX(0%)}}@keyframes slide-out{0%{transform:translate(0)}to{transform:translate(100%)}}@-webkit-keyframes slide-out{0%{-webkit-transform:translateX(0%)}to{-webkit-transform:translateX(100%)}}.slide_main_menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:4px 0}.close-button[_ngcontent-%COMP%]{position:absolute;right:10px;top:10px;width:30px;height:30px;border-radius:1px;background:#d8d8d8;border:0}.close-button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:15px}.slide_main_menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-right:9px;width:16px;height:16px;min-width:16px}.slide_main_menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex}.filter-buttons[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-between;padding:10px}.filter-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:48%;margin:0!important}.action-button1[_ngcontent-%COMP%]{position:absolute;top:90px;right:-14px}.expand-main[_ngcontent-%COMP%]{text-align:right}.expand-main[_ngcontent-%COMP%]   .expand[_ngcontent-%COMP%]{text-decoration:none;color:var(--bs-body-color);cursor:pointer}.align-right[_ngcontent-%COMP%]{text-align:right}"]}),o})();const K={asc:"desc",desc:"asc","":"asc"};let S=(()=>{class o{constructor(){this.direction="",this.sort=new t.vpe}ngOnChanges(e){this.sortable!==e?.oldColumn?.currentValue&&e?.oldColumn?.currentValue!==e?.oldColumn?.previousValue&&(this.direction="")}rotate(){this.direction=K[this.direction],this.sort.emit({column:this.sortable,direction:this.direction})}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275dir=t.lG2({type:o,selectors:[["th","sortable",""]],hostVars:4,hostBindings:function(e,n){1&e&&t.NdJ("click",function(){return n.rotate()}),2&e&&t.ekj("asc","asc"===n.direction)("desc","desc"===n.direction)},inputs:{sortable:"sortable",oldColumn:"oldColumn",direction:"direction"},outputs:{sort:"sort"},exportAs:["NgbdSortableHeader"],features:[t.TTD]}),o})();function W(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"div",16)(1,"button",17),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.downloadFileExcel())}),t._uU(2,"Download"),t.qZA()()}}function V(o,a){1&o&&(t.ynx(0),t.TgZ(1,"div",18)(2,"div",19)(3,"span",20),t._uU(4,"Loading..."),t.qZA()()(),t.BQk())}function j(o,a){1&o&&(t.TgZ(0,"div")(1,"p",18),t._uU(2,"No Matter found"),t.qZA()())}function z(o,a){1&o&&(t.TgZ(0,"tbody")(1,"tr")(2,"td",41)(3,"div",18)(4,"div",19)(5,"span",20),t._uU(6,"Loading..."),t.qZA()()()()()())}function X(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td")(6,"a",43),t._uU(7),t.qZA()(),t.TgZ(8,"td")(9,"a",43),t._uU(10),t.qZA()(),t.TgZ(11,"td")(12,"a",43),t._uU(13),t.qZA()(),t.TgZ(14,"td")(15,"a",43),t._uU(16),t.qZA()(),t.TgZ(17,"td"),t._uU(18),t.qZA(),t.TgZ(19,"td"),t._uU(20),t.ALo(21,"date"),t.qZA(),t.TgZ(22,"td"),t._uU(23),t.ALo(24,"date"),t.qZA(),t.TgZ(25,"td"),t._uU(26),t.ALo(27,"date"),t.qZA(),t.TgZ(28,"td"),t._uU(29),t.ALo(30,"date"),t.qZA(),t.TgZ(31,"td"),t._uU(32),t.qZA(),t.TgZ(33,"td"),t._uU(34),t.qZA(),t.TgZ(35,"td",44)(36,"a",45),t.NdJ("click",function(){const r=t.CHM(e).$implicit,C=t.oxw(4),x=t.MAs(15);return t.KtG(C.openClientData(x,r))}),t._uU(37),t.ALo(38,"titlecase"),t.qZA()(),t.TgZ(39,"td",44)(40,"a",45),t.NdJ("click",function(){const r=t.CHM(e).$implicit,C=t.oxw(4),x=t.MAs(17);return t.KtG(C.openMatterData(x,r))}),t._uU(41),t.ALo(42,"titlecase"),t.qZA()(),t.TgZ(43,"td",46),t.NdJ("click",function(){const r=t.CHM(e).$implicit,C=t.oxw(4),x=t.MAs(21);return t.KtG(C.openMatterLevelClientData(x,r.clientId))}),t.TgZ(44,"a"),t._uU(45,"See Rates"),t.qZA()(),t.TgZ(46,"td",46),t.NdJ("click",function(){const r=t.CHM(e).$implicit,C=t.oxw(4),x=t.MAs(19);return t.KtG(C.openMatterLevelMatterData(x,r.matterNumber))}),t.TgZ(47,"a"),t._uU(48,"See Rates"),t.qZA()()()}if(2&o){const e=a.$implicit;t.xp6(2),t.Oqu(null==e||null==e.clientGroupInfo?null:e.clientGroupInfo.groupId),t.xp6(2),t.hij(" ",(null==e.clientGroupInfo?null:e.clientGroupInfo.name)||e.client.name," "),t.xp6(2),t.MGl("routerLink","/matters/client-id/",null==e?null:e.clientId,""),t.xp6(1),t.Oqu(null==e||null==e.client?null:e.client.clientNumber),t.xp6(2),t.MGl("routerLink","/matters/client-id/",null==e?null:e.clientId,""),t.xp6(1),t.Oqu(null==e||null==e.client?null:e.client.name),t.xp6(2),t.MGl("routerLink","/matters/matter-id/",null==e?null:e.matterId,""),t.xp6(1),t.Oqu(null==e?null:e.name),t.xp6(2),t.MGl("routerLink","/matters/matter-id/",null==e?null:e.matterId,""),t.xp6(1),t.Oqu(null==e?null:e.matterNumber),t.xp6(2),t.Oqu(null==e?null:e.status),t.xp6(2),t.Oqu(t.Dn7(21,19,null==e?null:e.openDate,"MM/dd/YYYY","UTC")),t.xp6(3),t.Oqu(t.Dn7(24,23,null==e?null:e.closeDate,"MM/dd/YYYY","UTC")),t.xp6(3),t.Oqu(t.Dn7(27,27,null==e?null:e.lastInvoiceDate,"MM/dd/YYYY","UTC")),t.xp6(3),t.Oqu(t.Dn7(30,31,null==e||null==e.timecard?null:e.timecard.postDate,"MM/dd/YYYY","UTC")),t.xp6(3),t.Oqu(null==e?null:e.billTkprName),t.xp6(2),t.Oqu(null==e?null:e.rspTkprName),t.xp6(3),t.Oqu(t.lcZ(38,35,null==e||null==e.clientRateDetails?null:e.clientRateDetails.description)),t.xp6(4),t.Oqu(t.lcZ(42,37,null==e||null==e.matterRateDetails?null:e.matterRateDetails.description))}}function tt(o,a){if(1&o&&(t.TgZ(0,"tbody"),t.YNc(1,X,49,39,"tr",42),t.qZA()),2&o){const e=t.oxw(3);t.xp6(1),t.Q6J("ngForOf",e.matters)}}const et=function(){return{standalone:!0}};function nt(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"div")(1,"div",21)(2,"table",22)(3,"thead")(4,"tr")(5,"th",23),t.NdJ("sort",function(i){t.CHM(e);const r=t.oxw(2);return t.KtG(r.onSort(i))}),t._uU(6,"Client Group "),t._UZ(7,"span"),t.qZA(),t.TgZ(8,"th",24),t.NdJ("sort",function(i){t.CHM(e);const r=t.oxw(2);return t.KtG(r.onSort(i))}),t._uU(9,"Group name "),t._UZ(10,"span"),t.qZA(),t.TgZ(11,"th",25),t.NdJ("sort",function(i){t.CHM(e);const r=t.oxw(2);return t.KtG(r.onSort(i))}),t._uU(12,"Client Code "),t._UZ(13,"span"),t.qZA(),t.TgZ(14,"th",24),t.NdJ("sort",function(i){t.CHM(e);const r=t.oxw(2);return t.KtG(r.onSort(i))}),t._uU(15,"Client Name "),t._UZ(16,"span"),t.qZA(),t.TgZ(17,"th",24),t.NdJ("sort",function(i){t.CHM(e);const r=t.oxw(2);return t.KtG(r.onSort(i))}),t._uU(18,"Matter Name "),t._UZ(19,"span"),t.qZA(),t.TgZ(20,"th",26),t.NdJ("sort",function(i){t.CHM(e);const r=t.oxw(2);return t.KtG(r.onSort(i))}),t._uU(21,"Client Matter "),t._UZ(22,"span"),t.qZA(),t.TgZ(23,"th",27),t.NdJ("sort",function(i){t.CHM(e);const r=t.oxw(2);return t.KtG(r.onSort(i))}),t._uU(24,"Status "),t._UZ(25,"span"),t.qZA(),t.TgZ(26,"th",28),t.NdJ("sort",function(i){t.CHM(e);const r=t.oxw(2);return t.KtG(r.onSort(i))}),t._uU(27,"Open Date "),t._UZ(28,"span"),t.qZA(),t.TgZ(29,"th",29),t.NdJ("sort",function(i){t.CHM(e);const r=t.oxw(2);return t.KtG(r.onSort(i))}),t._uU(30,"Close Date "),t._UZ(31,"span"),t.qZA(),t.TgZ(32,"th",30),t.NdJ("sort",function(i){t.CHM(e);const r=t.oxw(2);return t.KtG(r.onSort(i))}),t._uU(33,"Last Bill Date "),t._UZ(34,"span"),t.qZA(),t.TgZ(35,"th",31),t.NdJ("sort",function(i){t.CHM(e);const r=t.oxw(2);return t.KtG(r.onSort(i))}),t._uU(36,"Last Time Entry"),t.qZA(),t.TgZ(37,"th",32),t.NdJ("sort",function(i){t.CHM(e);const r=t.oxw(2);return t.KtG(r.onSort(i))}),t._uU(38,"Billing Attorney "),t._UZ(39,"span"),t.qZA(),t.TgZ(40,"th",33),t.NdJ("sort",function(i){t.CHM(e);const r=t.oxw(2);return t.KtG(r.onSort(i))}),t._uU(41,"Responsible Attorney "),t._UZ(42,"span"),t.qZA(),t.TgZ(43,"th",34),t.NdJ("sort",function(i){t.CHM(e);const r=t.oxw(2);return t.KtG(r.onSort(i))}),t._uU(44,"Client Rate Set"),t.qZA(),t.TgZ(45,"th",35),t.NdJ("sort",function(i){t.CHM(e);const r=t.oxw(2);return t.KtG(r.onSort(i))}),t._uU(46,"Matter Rate Set"),t.qZA(),t.TgZ(47,"th",36),t._uU(48,"Client Level Rates"),t.qZA(),t.TgZ(49,"th",36),t._uU(50,"Matter Level Rates"),t.qZA()()(),t.YNc(51,z,7,0,"tbody",8),t.YNc(52,tt,2,1,"tbody",8),t.qZA()(),t.TgZ(53,"div",37)(54,"ngb-pagination",38),t.NdJ("pageChange",function(i){t.CHM(e);const r=t.oxw(2);return t.KtG(r._state.page=i)})("pageChange",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.refreshMatters())}),t.qZA(),t.TgZ(55,"select",39),t.NdJ("ngModelChange",function(i){t.CHM(e);const r=t.oxw(2);return t.KtG(r._state.limit=i)})("ngModelChange",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.refreshMatters())}),t.TgZ(56,"option",40),t._uU(57,"10 items per page"),t.qZA(),t.TgZ(58,"option",40),t._uU(59,"20 items per page"),t.qZA(),t.TgZ(60,"option",40),t._uU(61,"30 items per page"),t.qZA()()()()}if(2&o){const e=t.oxw(2);t.xp6(5),t.Q6J("oldColumn",e._state.sortColumn),t.xp6(3),t.Q6J("oldColumn",e._state.sortColumn),t.xp6(3),t.Q6J("oldColumn",e._state.sortColumn),t.xp6(3),t.Q6J("oldColumn",e._state.sortColumn),t.xp6(3),t.Q6J("oldColumn",e._state.sortColumn),t.xp6(3),t.Q6J("oldColumn",e._state.sortColumn),t.xp6(3),t.Q6J("oldColumn",e._state.sortColumn),t.xp6(3),t.Q6J("oldColumn",e._state.sortColumn),t.xp6(3),t.Q6J("oldColumn",e._state.sortColumn),t.xp6(3),t.Q6J("oldColumn",e._state.sortColumn),t.xp6(3),t.Q6J("oldColumn",e._state.sortColumn),t.xp6(2),t.Q6J("oldColumn",e._state.sortColumn),t.xp6(3),t.Q6J("oldColumn",e._state.sortColumn),t.xp6(3),t.Q6J("oldColumn",e._state.sortColumn),t.xp6(2),t.Q6J("oldColumn",e._state.sortColumn),t.xp6(6),t.Q6J("ngIf",e.isPaginationLoading),t.xp6(1),t.Q6J("ngIf",!e.isPaginationLoading),t.xp6(2),t.Q6J("collectionSize",e._state.totalResults)("page",e._state.page)("pageSize",e._state.limit)("rotate",!0)("maxSize",5)("boundaryLinks",!0),t.xp6(1),t.Q6J("ngModel",e._state.limit)("ngModelOptions",t.DdM(28,et)),t.xp6(1),t.Q6J("ngValue",10),t.xp6(2),t.Q6J("ngValue",20),t.xp6(2),t.Q6J("ngValue",30)}}function ot(o,a){if(1&o&&t.YNc(0,nt,62,29,"div",8),2&o){const e=t.oxw();t.Q6J("ngIf",!e.isLoading)}}function it(o,a){1&o&&(t.ynx(0),t.TgZ(1,"div",18)(2,"div",19)(3,"span",20),t._uU(4,"Loading..."),t.qZA()()(),t.BQk())}function rt(o,a){if(1&o&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.qZA(),t.TgZ(15,"td"),t._uU(16),t.ALo(17,"number"),t.qZA()()),2&o){const e=a.$implicit,n=t.oxw(3);t.xp6(2),t.Oqu(null==n.clientExceptionData||null==n.clientExceptionData.matter?null:n.clientExceptionData.matter.rspTkprNumber),t.xp6(2),t.Oqu(null==n.clientExceptionData||null==n.clientExceptionData.matter?null:n.clientExceptionData.matter.rspTkprName),t.xp6(2),t.Oqu(null==n.clientExceptionData||null==n.clientExceptionData.matter?null:n.clientExceptionData.matter.status),t.xp6(2),t.Oqu(null==e?null:e.office),t.xp6(2),t.Oqu(null==n.clientExceptionData||null==n.clientExceptionData.matter?null:n.clientExceptionData.matter.currency),t.xp6(2),t.Oqu(null==e?null:e.workRate),t.xp6(2),t.Oqu(null==e?null:e.stdRate),t.xp6(2),t.hij("",t.xi3(17,8,((null==e?null:e.stdRate)-(null==e?null:e.workRate))/(null==e?null:e.stdRate)*100,"1.2-2"),"%")}}function at(o,a){if(1&o&&(t.TgZ(0,"table",52)(1,"thead")(2,"tr")(3,"th"),t._uU(4,"Number"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Name"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Status"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"Office"),t.qZA(),t.TgZ(11,"th"),t._uU(12,"Currency"),t.qZA(),t.TgZ(13,"th"),t._uU(14,"Worked Rate"),t.qZA(),t.TgZ(15,"th"),t._uU(16,"Standard Rate"),t.qZA(),t.TgZ(17,"th"),t._uU(18,"Discount Percentage Difference"),t.qZA()()(),t.TgZ(19,"tbody"),t.YNc(20,rt,18,11,"tr",42),t.qZA()()),2&o){const e=t.oxw(2);t.xp6(20),t.Q6J("ngForOf",e.clientExceptionData.timecards)}}function lt(o,a){1&o&&(t.TgZ(0,"div")(1,"p",18),t._uU(2,"No record found"),t.qZA()())}function st(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"div",47)(1,"p",48),t._uU(2,"Client Rate Set"),t.qZA(),t.TgZ(3,"button",49),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.KtG(r.dismiss())}),t.qZA()(),t.TgZ(4,"div",50),t.YNc(5,it,5,0,"ng-container",8),t.YNc(6,at,21,1,"table",51),t.YNc(7,lt,3,0,"div",8),t.qZA()}if(2&o){const e=t.oxw();t.xp6(5),t.Q6J("ngIf",e.isClientContentLoading),t.xp6(1),t.Q6J("ngIf",e.clientExceptionData),t.xp6(1),t.Q6J("ngIf",!e.clientExceptionData)}}function ct(o,a){1&o&&(t.ynx(0),t.TgZ(1,"div",18)(2,"div",19)(3,"span",20),t._uU(4,"Loading..."),t.qZA()()(),t.BQk())}function ut(o,a){if(1&o&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.qZA(),t.TgZ(15,"td"),t._uU(16),t.ALo(17,"number"),t.qZA()()),2&o){const e=a.$implicit,n=t.oxw(3);t.xp6(2),t.Oqu(null==n.matterExceptionData||null==n.matterExceptionData.matter?null:n.matterExceptionData.matter.rspTkprNumber),t.xp6(2),t.Oqu(null==n.matterExceptionData||null==n.matterExceptionData.matter?null:n.matterExceptionData.matter.rspTkprName),t.xp6(2),t.Oqu(null==n.matterExceptionData||null==n.matterExceptionData.matter?null:n.matterExceptionData.matter.status),t.xp6(2),t.Oqu(null==e?null:e.office),t.xp6(2),t.Oqu(null==n.matterExceptionData||null==n.matterExceptionData.matter?null:n.matterExceptionData.matter.currency),t.xp6(2),t.Oqu(null==e?null:e.workRate),t.xp6(2),t.Oqu(null==e?null:e.stdRate),t.xp6(2),t.hij("",t.xi3(17,8,((null==e?null:e.stdRate)-(null==e?null:e.workRate))/(null==e?null:e.stdRate)*100,"1.2-2"),"%")}}function _t(o,a){if(1&o&&(t.TgZ(0,"table",52)(1,"thead")(2,"tr")(3,"th"),t._uU(4,"Number"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Name"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Status"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"Office"),t.qZA(),t.TgZ(11,"th"),t._uU(12,"Currency"),t.qZA(),t.TgZ(13,"th"),t._uU(14,"Worked Rate"),t.qZA(),t.TgZ(15,"th"),t._uU(16,"Standard Rate"),t.qZA(),t.TgZ(17,"th"),t._uU(18,"Discount Percentage Difference"),t.qZA()()(),t.TgZ(19,"tbody"),t.YNc(20,ut,18,11,"tr",42),t.qZA()()),2&o){const e=t.oxw(2);t.xp6(20),t.Q6J("ngForOf",e.matterExceptionData.timecards)}}function pt(o,a){1&o&&(t.TgZ(0,"div")(1,"p",18),t._uU(2,"No record found"),t.qZA()())}function mt(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"div",47)(1,"h4",48),t._uU(2,"Matter Rate Set"),t.qZA(),t.TgZ(3,"button",49),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.KtG(r.dismiss())}),t.qZA()(),t.TgZ(4,"div",50),t.YNc(5,ct,5,0,"ng-container",8),t.YNc(6,_t,21,1,"table",51),t.YNc(7,pt,3,0,"div",8),t.qZA()}if(2&o){const e=t.oxw();t.xp6(5),t.Q6J("ngIf",e.isMatterContentLoading),t.xp6(1),t.Q6J("ngIf",e.matterExceptionData.timecards.length),t.xp6(1),t.Q6J("ngIf",!e.matterExceptionData.timecards.length)}}function dt(o,a){if(1&o&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.qZA(),t.TgZ(15,"td"),t._uU(16),t.ALo(17,"number"),t.qZA()()),2&o){const e=a.$implicit;t.xp6(2),t.Oqu(null==e||null==e.matter?null:e.matter.rspTkprNumber),t.xp6(2),t.Oqu(null==e||null==e.matter?null:e.matter.rspTkprName),t.xp6(2),t.Oqu(null==e||null==e.matter?null:e.matter.status),t.xp6(2),t.Oqu(null==e||null==e.office?null:e.office.description),t.xp6(2),t.Oqu(null==e||null==e.matter?null:e.matter.currency),t.xp6(2),t.Oqu(null==e?null:e.workRate),t.xp6(2),t.Oqu(null==e?null:e.stdRate),t.xp6(2),t.hij("",t.xi3(17,8,((null==e?null:e.stdRate)-(null==e?null:e.workRate))/(null==e?null:e.stdRate)*100,"1.2-2"),"%")}}function gt(o,a){if(1&o&&(t.TgZ(0,"table",54)(1,"thead")(2,"tr")(3,"th"),t._uU(4,"Number"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Name"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Status"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"Office"),t.qZA(),t.TgZ(11,"th"),t._uU(12,"Currency"),t.qZA(),t.TgZ(13,"th"),t._uU(14,"Worked Rate"),t.qZA(),t.TgZ(15,"th"),t._uU(16,"Standard Rate"),t.qZA(),t.TgZ(17,"th"),t._uU(18,"Discount Percentage Difference"),t.qZA()()(),t.TgZ(19,"tbody"),t.YNc(20,dt,18,11,"tr",42),t.qZA()()),2&o){const e=t.oxw(2);t.xp6(20),t.Q6J("ngForOf",e.matterLevelExceptionData)}}function ht(o,a){1&o&&(t.TgZ(0,"div")(1,"p",18),t._uU(2,"No records found"),t.qZA()())}function ft(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"div",47)(1,"h4",48),t._uU(2,"Matter Level Rates"),t.qZA(),t.TgZ(3,"button",49),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.KtG(r.dismiss())}),t.qZA()(),t.TgZ(4,"div",50),t.YNc(5,gt,21,1,"table",53),t.YNc(6,ht,3,0,"div",8),t.qZA()}if(2&o){const e=t.oxw();t.xp6(5),t.Q6J("ngIf",e.matterLevelExceptionData.length),t.xp6(1),t.Q6J("ngIf",!e.matterLevelExceptionData.length)}}function Ct(o,a){if(1&o&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.qZA(),t.TgZ(15,"td"),t._uU(16),t.ALo(17,"number"),t.qZA()()),2&o){const e=a.$implicit;t.xp6(2),t.Oqu(null==e||null==e.matter?null:e.matter.rspTkprNumber),t.xp6(2),t.Oqu(null==e||null==e.matter?null:e.matter.rspTkprName),t.xp6(2),t.Oqu(null==e||null==e.matter?null:e.matter.status),t.xp6(2),t.Oqu(null==e||null==e.office?null:e.office.description),t.xp6(2),t.Oqu(null==e||null==e.matter?null:e.matter.currency),t.xp6(2),t.Oqu(null==e?null:e.workRate),t.xp6(2),t.Oqu(null==e?null:e.stdRate),t.xp6(2),t.hij("",t.xi3(17,8,((null==e?null:e.stdRate)-(null==e?null:e.workRate))/(null==e?null:e.stdRate)*100,"1.2-2"),"%")}}function Zt(o,a){if(1&o&&(t.TgZ(0,"table",54)(1,"thead")(2,"tr")(3,"th"),t._uU(4,"Number"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Name"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Status"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"Office"),t.qZA(),t.TgZ(11,"th"),t._uU(12,"Currency"),t.qZA(),t.TgZ(13,"th"),t._uU(14,"Worked Rate"),t.qZA(),t.TgZ(15,"th"),t._uU(16,"Standard Rate"),t.qZA(),t.TgZ(17,"th"),t._uU(18,"Discount Percentage Difference"),t.qZA()()(),t.TgZ(19,"tbody"),t.YNc(20,Ct,18,11,"tr",42),t.qZA()()),2&o){const e=t.oxw(2);t.xp6(20),t.Q6J("ngForOf",e.clientLevelExceptionData)}}function Tt(o,a){1&o&&(t.TgZ(0,"div")(1,"p",18),t._uU(2,"No records found"),t.qZA()())}function xt(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"div",47)(1,"h4",48),t._uU(2,"Client Level Rates"),t.qZA(),t.TgZ(3,"button",49),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.KtG(r.dismiss())}),t.qZA()(),t.TgZ(4,"div",50),t.YNc(5,Zt,21,1,"table",53),t.YNc(6,Tt,3,0,"div",8),t.qZA()}if(2&o){const e=t.oxw();t.xp6(5),t.Q6J("ngIf",e.clientLevelExceptionData.length),t.xp6(1),t.Q6J("ngIf",!e.clientLevelExceptionData.length)}}const Mt=function(){return[]};let q=(()=>{class o{constructor(e,n,i,r,C,x,O){this.router=e,this.route=n,this.matterService=i,this.timecardService=r,this.cdr=C,this.confirmationDialogService=x,this.modalService=O,this.matters=[],this.searchTerm="",this.searchTermUpdate=new d.x,this.isLoading=!1,this.isMatters=!0,this.isPaginationLoading=!1,this._state={page:1,limit:20,totalPages:1,totalResults:0,searchTerm:"",sortColumn:"createdAt",sortDirection:"desc"},this.matterIds=[],this.openWindowRef=[],this.clientExceptionData=[],this.matterExceptionData=[],this.matterLevelExceptionData=[],this.isClientContentLoading=!1,this.isMatterContentLoading=!1,this.route.params.subscribe(h=>{""!==h.matterName&&null!=h.matterName&&(this.matterName=h.matterName),""!==h.matterId&&null!=h.matterId&&(this.matterId=h.matterId),""!==h.clientName&&null!=h.clientName&&(this.clientName=h.clientName),""!==h.clientId&&null!=h.clientId&&(this.clientId=h.clientId)}),this.searchTermUpdate.pipe((0,u.b)(200),(0,_.x)()).subscribe(h=>{this._state.page=1,this._state.searchTerm=h,this.isLoading=!0,this.getAllMatters(this._state)})}ngOnDestroy(){this.openWindowRef.forEach(e=>{e.close()})}openWindowMatter(e){const n=window.open(e,"_blank","toolbar=no,location=no,status=no,menubar=no,scrollbars=yes,resizable=yes,width=550px,height=350px");return this.openWindowRef.push(n),!1}ngOnInit(){this.isLoading=!0,this.getAllMatters(this._state)}downloadFileExcel(){return this.matterService.getMaterForExcelDownload(this._state,{matterName:this.matterName,matterId:this.matterId,clientName:this.clientName,clientId:this.clientId}).subscribe(e=>{(0,g.S)(e,"matter")},e=>{})}onSort({column:e,direction:n}){console.log(e,n),this.sortedColumn=e,this.sortedDirection=n,this._state.sortColumn=e,this._state.sortDirection=n,this.getAllMatters(this._state)}getAllMatters(e){this.isPaginationLoading=!0,this.matterService.getMatters(e,{matterName:this.matterName,matterId:this.matterId,clientName:this.clientName,clientId:this.clientId}).subscribe(n=>{this.matters=n.results,this.isMatters=0!=this.matters.length,this.isPaginationLoading=!1,this.isLoading=!1,this.setState(n)},n=>{this.isPaginationLoading=!1,this.isLoading=!1})}getMatterFilterData(){this.matterService.getMatterFilteredData(this._state,this.filterData).subscribe(e=>{this.isPaginationLoading=!1,this.matters=e.results,this.isMatters=0!=this.matters.length,this.setState(e),this.isLoading=!1},e=>{this.isPaginationLoading=!1,this.isLoading=!1})}refreshMatters(){this.isPaginationLoading=!0,this.getAllMatters(this._state)}setState(e){this._state.page=e.page,this._state.limit=e.limit,this._state.totalPages=e.totalPages,this._state.totalResults=e.totalResults}editMatter(e){this.router.navigate(["/matters/edit-matter/"+e])}updateStatus(e,n){this.matterService.updateMatter(e,{isActive:!n}).subscribe(r=>{r&&this.refreshMatters()})}updateFavorite(e,n){this.matterService.updateMatter(e,{isFavorite:!n}).subscribe(r=>{r&&this.refreshMatters()})}deleteMatter(e){this.confirmationDialogService.confirm("Please confirm..","Do you really want to delete this matter ?").then(n=>{n&&this.matterService.deleteMatter(e).subscribe(i=>{this.getAllMatters(this._state)})})}openClientData(e,n){this.clientExceptionData.matter=n,this.timecardService.getTimeCardsByMatter(n.matterId).subscribe(i=>{this.isClientContentLoading=!0,this.clientExceptionData.timecards=i.result.results,this.modalService.open(e,{size:"xl"}),console.log(this.clientExceptionData),this.isClientContentLoading=!1},i=>{this.isClientContentLoading=!1})}openMatterData(e,n){this.matterExceptionData.matter=n,this.timecardService.getTimeCardsByMatter(n.matterId).subscribe(i=>{this.isMatterContentLoading=!0,this.matterExceptionData.timecards=i.result.results,this.modalService.open(e,{size:"xl"}),this.isMatterContentLoading=!1},i=>{this.isMatterContentLoading=!1})}openMatterLevelClientData(e,n){this.timecardService.getTimecardClientLevelRate(n).subscribe(i=>{this.clientLevelExceptionData=i.timecards.results,this.modalService.open(e,{size:"xl"})})}openMatterLevelMatterData(e,n){this.timecardService.getTimecardMatterLevelRate(n).subscribe(i=>{this.matterLevelExceptionData=i.timecards.results,this.modalService.open(e,{size:"xl"})})}saveFilter(e){e?localStorage.setItem("filter_matter_values",JSON.stringify(e)):localStorage.removeItem("filter_matter_values")}handleResults(e){this.saveFilter(e),this.filterData=e,this.isLoading=!0,this.getMatterFilterData()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(m.F0),t.Y36(m.gz),t.Y36(U),t.Y36(M.O),t.Y36(t.sBO),t.Y36(N.O),t.Y36(v.FF))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-matter"]],viewQuery:function(e,n){if(1&e&&t.Gf(s.j,5),2&e){let i;t.iGM(i=t.CRH())&&(n.headers=i)}},inputs:{data:"data"},decls:22,vars:8,consts:[[1,"container-fluid","mt-2"],[1,"card"],[1,"card-body"],[1,"row","mb-2","search-header"],[1,"col-md-9","text-left","mb-1","mb-md-0"],[1,"form-group","mb-1"],["type","text","type","text","name","searchTerm","id","searchstaffs","placeholder","Search here...",1,"form-control",3,"ngModel","ngModelChange"],["class","col-md-3",4,"ngIf"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["table",""],[3,"actionparam","matterRecords"],["clientcontent",""],["mattercontent",""],["matterLevelContent",""],["clientLevelContent",""],[1,"col-md-3"],["type","button",1,"btn","btn-primary","btn-block","btn-download-button",3,"click"],[1,"text-center"],["role","status",1,"spinner-border"],[1,"sr-only"],[1,"table-responsive","scroll-position"],[1,"table","table-striped","scroll-position-div"],["scope","col","sortable","clientId",3,"oldColumn","sort"],["scope","col","sortable","name",3,"oldColumn","sort"],["scope","col","sortable","clientNumber",3,"oldColumn","sort"],["scope","col","sortable","matterNumber",3,"oldColumn","sort"],["scope","col","sortable","status",3,"oldColumn","sort"],["scope","col","sortable","openDate",3,"oldColumn","sort"],["scope","col","sortable","closeDate",3,"oldColumn","sort"],["scope","col","sortable","lastInvoiceDate",3,"oldColumn","sort"],["scope","col","sortable","postDate",3,"oldColumn","sort"],["scope","col","sortable","billTkprName",3,"oldColumn","sort"],["scope","col","sortable","rspTkprName",3,"oldColumn","sort"],["scope","col","sortable","clientRateDescription",3,"oldColumn","sort"],["scope","col","sortable","matterRateDescription",3,"oldColumn","sort"],["scope","col"],[1,"d-flex","justify-content-between","p-2"],[3,"collectionSize","page","pageSize","rotate","maxSize","boundaryLinks","pageChange"],[1,"custom-select",2,"width","auto",3,"ngModel","ngModelOptions","ngModelChange"],[3,"ngValue"],["colspan","16"],[4,"ngFor","ngForOf"],["role","link",3,"routerLink"],[1,"pointer"],[3,"click"],[1,"pointer",3,"click"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],["class","table table-bordered table-hover mb-5 mt-2",4,"ngIf"],[1,"table","table-bordered","table-hover","mb-5","mt-2"],["class","table table-bordered",4,"ngIf"],[1,"table","table-bordered"]],template:function(e,n){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"form")(4,"div",3)(5,"div",4)(6,"div",5)(7,"input",6),t.NdJ("ngModelChange",function(r){return n._state.searchTerm=r})("ngModelChange",function(r){return n.searchTermUpdate.next(r)}),t.qZA()()(),t.YNc(8,W,3,0,"div",7),t.qZA(),t.YNc(9,V,5,0,"ng-container",8),t.YNc(10,j,3,0,"div",9),t.YNc(11,ot,1,1,"ng-template",null,10,t.W1O),t.qZA()(),t.TgZ(13,"app-matter-filter",11),t.NdJ("matterRecords",function(r){return n.handleResults(r)}),t.qZA()()(),t.YNc(14,st,8,3,"ng-template",null,12,t.W1O),t.YNc(16,mt,8,3,"ng-template",null,13,t.W1O),t.YNc(18,ft,7,2,"ng-template",null,14,t.W1O),t.YNc(20,xt,7,2,"ng-template",null,15,t.W1O)),2&e){const i=t.MAs(12);t.Q6J("@routerTransition",void 0),t.xp6(7),t.Q6J("ngModel",n._state.searchTerm),t.xp6(1),t.Q6J("ngIf",!n.isLoading&&n._state.totalResults>0),t.xp6(1),t.Q6J("ngIf",n.isLoading),t.xp6(1),t.Q6J("ngIf",!n.isMatters)("ngIfElse",i),t.xp6(3),t.Q6J("actionparam",t.DdM(7,Mt))}},dependencies:[c.sg,c.O5,m.yS,p._Y,p.YN,p.Kr,p.Fj,p.EJ,p.JJ,p.JL,p.On,p.F,v.N9,G,S,c.JJ,c.rS,c.uU],styles:[".black-text-link[_ngcontent-%COMP%]{color:#000;text-decoration:none}.pointer[_ngcontent-%COMP%]{cursor:pointer}.btn-download-button[_ngcontent-%COMP%]{max-width:153px;padding:4px 10px}"],data:{animation:[(0,Z.Z9)()]}}),o})();var vt=l(8161);function bt(o,a){1&o&&(t.ynx(0),t.TgZ(1,"div",7)(2,"div",8)(3,"span",9),t._uU(4,"Loading..."),t.qZA()()(),t.BQk())}function At(o,a){1&o&&(t.TgZ(0,"div")(1,"p",7),t._uU(2,"No Matter found"),t.qZA()())}function Ut(o,a){1&o&&(t.TgZ(0,"tbody")(1,"tr")(2,"td",16)(3,"div",7)(4,"div",8)(5,"span",9),t._uU(6,"Loading..."),t.qZA()()()()()())}function qt(o,a){if(1&o&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.qZA(),t.TgZ(15,"td"),t._uU(16),t.qZA(),t.TgZ(17,"td"),t._uU(18),t.qZA(),t.TgZ(19,"td"),t._uU(20),t.qZA(),t.TgZ(21,"td"),t._uU(22),t.qZA(),t.TgZ(23,"td"),t._uU(24),t.qZA(),t.TgZ(25,"td"),t._uU(26),t.qZA()()),2&o){const e=a.$implicit;t.xp6(2),t.Oqu(e.number),t.xp6(2),t.Oqu(e.name),t.xp6(2),t.Oqu(e.active),t.xp6(2),t.Oqu(e.classYear),t.xp6(2),t.Oqu(e.office),t.xp6(2),t.Oqu(e.officeName),t.xp6(2),t.Oqu(e.rankCode),t.xp6(2),t.Oqu(e.rankName),t.xp6(2),t.Oqu(e.effectiveDate),t.xp6(2),t.Oqu(e.Currency),t.xp6(2),t.Oqu(e.billRate),t.xp6(2),t.Oqu(e.standardRate),t.xp6(2),t.Oqu(e.diff)}}function Ot(o,a){if(1&o&&(t.TgZ(0,"tbody"),t.YNc(1,qt,27,13,"tr",17),t.qZA()),2&o){const e=t.oxw(3);t.xp6(1),t.Q6J("ngForOf",e.matters)}}const Dt=function(){return{standalone:!0}};function Nt(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"div")(1,"div",10)(2,"table",11)(3,"thead")(4,"tr")(5,"th"),t._uU(6,"Number"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Name"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"Status"),t.qZA(),t.TgZ(11,"th"),t._uU(12,"Class Year"),t.qZA(),t.TgZ(13,"th"),t._uU(14,"Office"),t.qZA(),t.TgZ(15,"th"),t._uU(16,"Office Name"),t.qZA(),t.TgZ(17,"th"),t._uU(18,"Rank Code"),t.qZA(),t.TgZ(19,"th"),t._uU(20,"Rank Name"),t.qZA(),t.TgZ(21,"th"),t._uU(22,"Effective Date"),t.qZA(),t.TgZ(23,"th"),t._uU(24,"Currency"),t.qZA(),t.TgZ(25,"th"),t._uU(26,"Bill Rate"),t.qZA(),t.TgZ(27,"th"),t._uU(28,"Standard Rate"),t.qZA(),t.TgZ(29,"th"),t._uU(30,"Diff"),t.qZA()()(),t.YNc(31,Ut,7,0,"tbody",4),t.YNc(32,Ot,2,1,"tbody",4),t.qZA(),t.TgZ(33,"div",12)(34,"ngb-pagination",13),t.NdJ("pageChange",function(i){t.CHM(e);const r=t.oxw(2);return t.KtG(r._state.page=i)})("pageChange",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.refreshMatters())}),t.qZA(),t.TgZ(35,"select",14),t.NdJ("ngModelChange",function(i){t.CHM(e);const r=t.oxw(2);return t.KtG(r._state.limit=i)})("ngModelChange",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.refreshMatters())}),t.TgZ(36,"option",15),t._uU(37,"10 items per page"),t.qZA(),t.TgZ(38,"option",15),t._uU(39,"20 items per page"),t.qZA(),t.TgZ(40,"option",15),t._uU(41,"30 items per page"),t.qZA()()()()()}if(2&o){const e=t.oxw(2);t.xp6(31),t.Q6J("ngIf",e.isLoading),t.xp6(1),t.Q6J("ngIf",!e.isLoading),t.xp6(2),t.Q6J("collectionSize",e._state.totalResults)("page",e._state.page)("pageSize",e._state.limit)("rotate",!0)("maxSize",5)("boundaryLinks",!0),t.xp6(1),t.Q6J("ngModel",e._state.limit)("ngModelOptions",t.DdM(13,Dt)),t.xp6(1),t.Q6J("ngValue",10),t.xp6(2),t.Q6J("ngValue",20),t.xp6(2),t.Q6J("ngValue",30)}}function yt(o,a){if(1&o&&t.YNc(0,Nt,42,14,"div",4),2&o){const e=t.oxw();t.Q6J("ngIf",!e.isLoading)}}const St=[{path:"",component:q},{path:"roster/:keyword",component:(()=>{class o{constructor(e,n,i,r){this.router=e,this.matterService=n,this.cdr=i,this.route=r,this.matters=[],this.searchTerm="",this.searchTermUpdate=new d.x,this.isLoading=!1,this.isMatters=!0,this.isPaginationLoading=!1,this._state={page:1,limit:20,totalPages:1,totalResults:0,searchTerm:"",sortColumn:"createdAt",sortDirection:"desc"},this.route.params.subscribe(C=>{""!==C.keyword&&null!=C.keyword&&(this.keyword=C.keyword,this.getAllMatters(this._state))})}ngOnInit(){}onSort({column:e,direction:n}){this.sortedColumn=e,this.sortedDirection=n,this._state.sortColumn=e,this._state.sortDirection=n,this.getAllMatters(this._state)}getAllMatters(e){this.isLoading=!0,this.matterService.getMatterRoster(e,this.keyword).subscribe(n=>{this.matters=n.results,console.log(n),this.isMatters=0!=this.matters.length,this.setState(n),this.isLoading=!1},n=>{this.isLoading=!1})}refreshMatters(){this.isLoading=!0,this.getAllMatters(this._state)}setState(e){this._state.page=e.page,this._state.limit=e.limit,this._state.totalPages=e.totalPages,this._state.totalResults=e.totalResults}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(m.F0),t.Y36(U),t.Y36(t.sBO),t.Y36(m.gz))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-matter-roster"]],viewQuery:function(e,n){if(1&e&&t.Gf(s.j,5),2&e){let i;t.iGM(i=t.CRH())&&(n.headers=i)}},decls:9,vars:8,consts:[[3,"heading","previousHeading","previousLink"],[1,"container-fluid","mt-2"],[1,"card"],[1,"card-body"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["table",""],[1,"text-center"],["role","status",1,"spinner-border"],[1,"sr-only"],[1,"table-responsive"],[1,"table","table-striped"],[1,"d-flex","justify-content-between","p-2"],[3,"collectionSize","page","pageSize","rotate","maxSize","boundaryLinks","pageChange"],[1,"custom-select",2,"width","auto",3,"ngModel","ngModelOptions","ngModelChange"],[3,"ngValue"],["colspan","6"],[4,"ngFor","ngForOf"]],template:function(e,n){if(1&e&&(t.TgZ(0,"div"),t._UZ(1,"app-page-header",0),t.TgZ(2,"div",1)(3,"div",2)(4,"div",3),t.YNc(5,bt,5,0,"ng-container",4),t.YNc(6,At,3,0,"div",5),t.YNc(7,yt,1,1,"ng-template",null,6,t.W1O),t.qZA()()()()),2&e){const i=t.MAs(8);t.Q6J("@routerTransition",void 0),t.xp6(1),t.Q6J("heading","Matter Roster")("previousHeading","Matters")("previousLink","matters"),t.xp6(1),t.Q6J("@routerTransition",void 0),t.xp6(3),t.Q6J("ngIf",n.isLoading),t.xp6(1),t.Q6J("ngIf",!n.isMatters)("ngIfElse",i)}},dependencies:[c.sg,c.O5,p.YN,p.Kr,p.EJ,p.JJ,vt.q,p.On,v.N9],data:{animation:[(0,Z.Z9)()]}}),o})()},{path:"matter-name/:matterName",component:q},{path:"matter-id/:matterId",component:q},{path:"client-name/:clientName",component:q},{path:"client-id/:clientId",component:q}];let Rt=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[m.Bz.forChild(St),m.Bz]}),o})();var Et=l(4336),Jt=l(1094),Lt=l(7441);let It=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({providers:[U,Lt.x,S],imports:[c.ez,Rt,p.UX,Et.$n,p.u5,v.ZS,v.jF,v.XC,Jt.yI.forRoot()]}),o})()},7441:(b,f,l)=>{l.d(f,{x:()=>d});var c=l(2340),m=l(4650),Z=l(529),g=l(2487);let d=(()=>{class u{constructor(s,t){this.http=s,this.apiService=t,this.url=c.N.backendUrl}getStaffs(s){return this.apiService.get(""==s.searchTerm?`/staffs?sortBy=${s.sortColumn+":"+s.sortDirection}&limit=${s.limit}&page=${s.page}`:`/staffs?sortBy=${s.sortColumn+":"+s.sortDirection}&limit=${s.limit}&page=${s.page}&search=${s.searchTerm}`)}getSearchStaffs(s,t){return this.apiService.post(""==s.searchTerm?`/staffs/search?sortBy=${s.sortColumn+":"+s.sortDirection}&limit=${s.limit}&page=${s.page}`:`/staffs/search?sortBy=${s.sortColumn+":"+s.sortDirection}&limit=${s.limit}&page=${s.page}&search=${s.searchTerm}`,{responsibleBillingManagerId:t})}addMember(s){return this.apiService.post("/staffs",s)}updateMember(s,t){return this.apiService.patch(`/staffs/${s}`,t)}getStaffById(s){return this.apiService.get("/staffs/"+s)}deleteUser(s){return this.apiService.delete("/staffs/"+s)}getActivity(s){return this.apiService.get(""==s.searchTerm?`/staffs/activity/all?sortBy=${s.sortColumn+":"+s.sortDirection}&limit=${s.limit}&page=${s.page}`:`/staffs/activity/all?sortBy=${s.sortColumn+":"+s.sortDirection}&limit=${s.limit}&page=${s.page}&search=${s.searchTerm}`)}}return u.\u0275fac=function(s){return new(s||u)(m.LFG(Z.eN),m.LFG(g.s))},u.\u0275prov=m.Yz7({token:u,factory:u.\u0275fac}),u})()},4221:(b,f,l)=>{l.d(f,{j:()=>c.j});var c=l(8260)},8260:(b,f,l)=>{l.d(f,{j:()=>Z});var c=l(4650);const m={asc:"desc",desc:"asc","":"asc"};let Z=(()=>{class g{constructor(){this.direction="",this.sort=new c.vpe}ngOnChanges(u){this.sortable!==u?.oldColumn?.currentValue&&u?.oldColumn?.currentValue!==u?.oldColumn?.previousValue&&(this.direction="")}rotate(){this.direction=m[this.direction],this.sort.emit({column:this.sortable,direction:this.direction})}}return g.\u0275fac=function(u){return new(u||g)},g.\u0275dir=c.lG2({type:g,selectors:[["th","sortable",""]],hostVars:4,hostBindings:function(u,_){1&u&&c.NdJ("click",function(){return _.rotate()}),2&u&&c.ekj("asc","asc"===_.direction)("desc","desc"===_.direction)},inputs:{sortable:"sortable",oldColumn:"oldColumn",direction:"direction"},outputs:{sort:"sort"},exportAs:["NgbdSortableHeader"],features:[c.TTD]}),g})()},2558:(b,f,l)=>{l.d(f,{S:()=>c});const c=(m,Z="records")=>{const g=new Blob([m],{type:"application/octet-stream"}),d=window.URL.createObjectURL(g);let u=document.createElement("a");u.href=d,u.download=`${Z}.xlsx`,document.body.appendChild(u),u.click(),document.body.removeChild(u)}},8161:(b,f,l)=>{l.d(f,{q:()=>u});var c=l(4650),m=l(6895),Z=l(7750);const g=function(_){return["/",_]};function d(_,s){if(1&_&&(c.TgZ(0,"li",6)(1,"a",7),c._uU(2),c.qZA()()),2&_){const t=c.oxw();c.xp6(1),c.Q6J("routerLink",c.VKq(2,g,t.previousLink)),c.xp6(1),c.Oqu(t.previousHeading)}}let u=(()=>{class _{constructor(){this.previousLink=decodeURIComponent(this.previousLink)}ngOnInit(){}}return _.\u0275fac=function(t){return new(t||_)},_.\u0275cmp=c.Xpm({type:_,selectors:[["app-page-header"]],inputs:{previousHeading:"previousHeading",previousLink:"previousLink",heading:"heading",previoudIcon:"previoudIcon",icon:"icon"},decls:9,vars:6,consts:[[1,"row"],[1,"col-xl-12"],[1,"page-header"],[1,"breadcrumb"],["class","breadcrumb-item",4,"ngIf"],[1,"breadcrumb-item","active"],[1,"breadcrumb-item"],["href","Javascript:void(0)",3,"routerLink"]],template:function(t,T){1&t&&(c.TgZ(0,"div",0)(1,"div",1)(2,"h2",2),c._uU(3),c.qZA(),c.TgZ(4,"ol",3),c.YNc(5,d,3,4,"li",4),c.TgZ(6,"li",5),c._UZ(7,"i"),c._uU(8),c.qZA()()()()),2&t&&(c.xp6(3),c.hij(" ",T.heading," "),c.xp6(2),c.Q6J("ngIf",T.previousHeading),c.xp6(2),c.Gre("fa ",T.icon,""),c.xp6(1),c.hij(" ",T.heading,""))},dependencies:[m.O5,Z.yS],styles:[".breadcrumb[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;margin-bottom:0;list-style:none;padding:7px 0 0 22px}.breadcrumb-item[_ngcontent-%COMP%]{color:#773784}.breadcrumb-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none!important;color:#773784}.breadcrumb-item.active[_ngcontent-%COMP%]{color:#773784}.breadcrumb[_ngcontent-%COMP%]   .breadcrumb-item[_ngcontent-%COMP%]:first-child   i[_ngcontent-%COMP%]{margin-right:1rem}@media (max-width: 768px){.breadcrumb-item.active[_ngcontent-%COMP%]{color:#773784}}"]}),_})()},8372:(b,f,l)=>{l.d(f,{b:()=>g});var c=l(4049),m=l(4482),Z=l(5403);function g(d,u=c.z){return(0,m.e)((_,s)=>{let t=null,T=null,A=null;const D=()=>{if(t){t.unsubscribe(),t=null;const M=T;T=null,s.next(M)}};function U(){const M=A+d,N=u.now();if(N<M)return t=this.schedule(void 0,M-N),void s.add(t);D()}_.subscribe((0,Z.x)(s,M=>{T=M,A=u.now(),t||(t=u.schedule(U,d),s.add(t))},()=>{D(),s.complete()},void 0,()=>{T=t=null}))})}},8733:(b,f,l)=>{l.d(f,{T:()=>u});var c=l(4482),m=l(5797),Z=l(8189),g=l(3269),d=l(2076);function u(..._){const s=(0,g.yG)(_),t=(0,g._6)(_,1/0);return _=(0,m.k)(_),(0,c.e)((T,A)=>{(0,Z.J)(t)((0,d.D)([T,..._],s)).subscribe(A)})}}}]);