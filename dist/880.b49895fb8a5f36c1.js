"use strict";(self.webpackChunktest_ng7=self.webpackChunktest_ng7||[]).push([[880,161],{9880:(b,g,s)=>{s.r(g),s.d(g,{RatesModule:()=>B});var o=s(6895),c=s(4006),h=s(6393),m=s(486),f=s(1094),l=s(7750),p=s(4221),_=s(4903),d=s(2558),v=s(7579),R=s(8372),T=s(1884),t=s(4650),C=s(2340),x=s(529),S=s(2487);let M=(()=>{class n{constructor(e,r){this.http=e,this.apiService=r,this.url=C.N.backendUrl}getRates(e){return this.apiService.get(""==e.searchTerm?`/rates?sortBy=${e.sortColumn+":"+e.sortDirection}&limit=${e.limit}&page=${e.page}`:`/rates?sortBy=${e.sortColumn+":"+e.sortDirection}&limit=${e.limit}&page=${e.page}&search=${e.searchTerm}`)}getRateForExcelDownload(e){return this.apiService.getBlob(""==e.searchTerm?"/rates/download?sortBy="+e.sortColumn+":"+e.sortDirection:`/rates/download?sortBy=${e.sortColumn+":"+e.sortDirection}&search=${e.searchTerm}`)}getDeletedRates(e){return this.apiService.get(""==e.searchTerm?`/rates?isDelete=true&sortBy=${e.sortColumn+":"+e.sortDirection}&limit=${e.limit}&page=${e.page}`:`/rates?isDelete=true&sortBy=${e.sortColumn+":"+e.sortDirection}&limit=${e.limit}&page=${e.page}&search=${e.searchTerm}`)}getRateCSV(){return this.apiService.get("/rates/bulk/csv/data")}getRateById(e){return this.apiService.get(`/rates/${e}`)}addNewRate(e){return this.apiService.post("/rates",e)}updateRate(e,r){return this.apiService.patch(`/rates/${e}`,r)}deleteRate(e){return this.apiService.delete("/rates/"+e)}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(x.eN),t.LFG(S.s))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var y=s(4304),A=s(8161);const O={asc:"desc",desc:"asc","":"asc"};let Z=(()=>{class n{constructor(){this.direction="",this.sort=new t.vpe}ngOnChanges(e){this.sortable!==e?.oldColumn?.currentValue&&e?.oldColumn?.currentValue!==e?.oldColumn?.previousValue&&(this.direction="")}rotate(){this.direction=O[this.direction],this.sort.emit({column:this.sortable,direction:this.direction})}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=t.lG2({type:n,selectors:[["th","sortable",""]],hostVars:4,hostBindings:function(e,r){1&e&&t.NdJ("click",function(){return r.rotate()}),2&e&&t.ekj("asc","asc"===r.direction)("desc","desc"===r.direction)},inputs:{sortable:"sortable",oldColumn:"oldColumn",direction:"direction"},outputs:{sort:"sort"},exportAs:["NgbdSortableHeader"],features:[t.TTD]}),n})();function U(n,u){if(1&n){const e=t.EpF();t.TgZ(0,"div",12)(1,"button",13),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.downloadFileExcel())}),t._uU(2,"Download"),t.qZA()()}}function J(n,u){1&n&&(t.ynx(0),t.TgZ(1,"div",14)(2,"div",15)(3,"span",16),t._uU(4,"Loading..."),t.qZA()()(),t.BQk())}function H(n,u){1&n&&(t.TgZ(0,"div")(1,"p",14),t._uU(2,"No rates found"),t.qZA()())}function D(n,u){if(1&n&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.ALo(13,"date"),t.qZA()()),2&n){const e=u.$implicit;t.xp6(2),t.Oqu(e.code),t.xp6(2),t.Oqu(e.description),t.xp6(2),t.Oqu(e.formula),t.xp6(2),t.Oqu(e.rateTypeOne),t.xp6(2),t.Oqu(e.isApplyCurrencyRounding),t.xp6(2),t.Oqu(t.xi3(13,6,e.createdAt,"medium"))}}const N=function(){return{standalone:!0}};function E(n,u){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"div",17)(2,"table",18)(3,"thead")(4,"tr")(5,"th",19),t.NdJ("sort",function(i){t.CHM(e);const a=t.oxw(2);return t.KtG(a.onSort(i))}),t._uU(6,"Code"),t._UZ(7,"span"),t.qZA(),t.TgZ(8,"th",20),t.NdJ("sort",function(i){t.CHM(e);const a=t.oxw(2);return t.KtG(a.onSort(i))}),t._uU(9,"Description"),t._UZ(10,"span"),t.qZA(),t.TgZ(11,"th",21),t.NdJ("sort",function(i){t.CHM(e);const a=t.oxw(2);return t.KtG(a.onSort(i))}),t._uU(12,"Formula"),t._UZ(13,"span"),t.qZA(),t.TgZ(14,"th",22),t.NdJ("sort",function(i){t.CHM(e);const a=t.oxw(2);return t.KtG(a.onSort(i))}),t._uU(15,"Rate Type One"),t._UZ(16,"span"),t.qZA(),t.TgZ(17,"th",23),t.NdJ("sort",function(i){t.CHM(e);const a=t.oxw(2);return t.KtG(a.onSort(i))}),t._uU(18,"Currency Rounding"),t._UZ(19,"span"),t.qZA(),t.TgZ(20,"th",24),t.NdJ("sort",function(i){t.CHM(e);const a=t.oxw(2);return t.KtG(a.onSort(i))}),t._uU(21,"Created At"),t._UZ(22,"span"),t.qZA()()(),t.TgZ(23,"tbody"),t.YNc(24,D,14,9,"tr",25),t.qZA()(),t.TgZ(25,"div",26)(26,"ngb-pagination",27),t.NdJ("pageChange",function(i){t.CHM(e);const a=t.oxw(2);return t.KtG(a._state.page=i)})("pageChange",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.refreshTimeKeepers())}),t.qZA(),t.TgZ(27,"select",28),t.NdJ("ngModelChange",function(i){t.CHM(e);const a=t.oxw(2);return t.KtG(a._state.limit=i)})("ngModelChange",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.refreshRates())}),t.TgZ(28,"option",29),t._uU(29,"10 items per page"),t.qZA(),t.TgZ(30,"option",29),t._uU(31,"20 items per page"),t.qZA(),t.TgZ(32,"option",29),t._uU(33,"30 items per page"),t.qZA()()()()()}if(2&n){const e=t.oxw(2);t.xp6(5),t.Q6J("oldColumn",e._state.sortColumn),t.xp6(3),t.Q6J("oldColumn",e._state.sortColumn),t.xp6(3),t.Q6J("oldColumn",e._state.sortColumn),t.xp6(3),t.Q6J("oldColumn",e._state.sortColumn),t.xp6(3),t.Q6J("oldColumn",e._state.sortColumn),t.xp6(3),t.Q6J("oldColumn",e._state.sortColumn),t.xp6(4),t.Q6J("ngForOf",e.rates),t.xp6(2),t.Q6J("collectionSize",e._state.totalResults)("page",e._state.page)("pageSize",e._state.limit)("rotate",!0)("maxSize",5)("boundaryLinks",!0),t.xp6(1),t.Q6J("ngModel",e._state.limit)("ngModelOptions",t.DdM(18,N)),t.xp6(1),t.Q6J("ngValue",10),t.xp6(2),t.Q6J("ngValue",20),t.xp6(2),t.Q6J("ngValue",30)}}function P(n,u){if(1&n&&t.YNc(0,E,34,19,"div",9),2&n){const e=t.oxw();t.Q6J("ngIf",!e.isLoading)}}const L=[{path:"",component:(()=>{class n{constructor(e,r,i,a){this.router=e,this.rateService=r,this.cdr=i,this.confirmationDialogService=a,this.rates=[],this.searchTerm="",this.searchTermUpdate=new v.x,this.isLoading=!1,this.isRates=!0,this._state={page:1,limit:20,totalPages:1,totalResults:0,searchTerm:"",sortColumn:"createdAt",sortDirection:"desc"},this.searchTermUpdate.pipe((0,R.b)(200),(0,T.x)()).subscribe(I=>{this._state.searchTerm=I,this.getAllRates(this._state)})}ngOnInit(){this.isLoading=!0,this.getAllRates(this._state)}onSort({column:e,direction:r}){this.sortedColumn=e,this.sortedDirection=r,this._state.sortColumn=e,this._state.sortDirection=r,this.getAllRates(this._state)}downloadFileExcel(){return this.rateService.getRateForExcelDownload(this._state).subscribe(e=>{(0,d.S)(e,"rate")},e=>{})}getAllRates(e){this.rateService.getRates(e).subscribe(r=>{this.rates=r.results,console.log(this.rates,"---------------------"),this.isRates=0!=this.rates.length,this.setState(r),this.isLoading=!1},r=>{this.isLoading=!1})}refreshRates(){this.getAllRates(this._state)}setState(e){this._state.page=e.page,this._state.limit=e.limit,this._state.totalPages=e.totalPages,this._state.totalResults=e.totalResults}editRate(e){this.router.navigate(["/rates/edit-rate/"+e])}updateStatus(e,r){this.rateService.updateRate(e,{isActive:!r}).subscribe(a=>{a&&this.refreshRates()})}updateFavorite(e,r){this.rateService.updateRate(e,{isFavorite:!r}).subscribe(a=>{a&&this.refreshRates()})}deleteRate(e){this.confirmationDialogService.confirm("Please confirm..","Do you really want to delete this rate ?").then(r=>{r&&this.rateService.deleteRate(e).subscribe(i=>{this.getAllRates(this._state)})})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(l.F0),t.Y36(M),t.Y36(t.sBO),t.Y36(y.O))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-rate"]],viewQuery:function(e,r){if(1&e&&t.Gf(p.j,5),2&e){let i;t.iGM(i=t.CRH())&&(r.headers=i)}},decls:15,vars:8,consts:[[3,"heading"],[1,"container-fluid","mt-2"],[1,"card"],[1,"card-body"],[1,"row","mb-2","search-header"],[1,"col-md-10","text-left","mb-1","mb-sm-0"],[1,"form-group","mb-1"],["type","text","type","text","name","searchTerm","id","timeKeeperstaffs","placeholder","Search here...",1,"form-control",3,"ngModel","ngModelChange"],["class","col-md-2 text-center",4,"ngIf"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["table",""],[1,"col-md-2","text-center"],["type","button",1,"btn","btn-primary","btn-block",3,"click"],[1,"text-center"],["role","status",1,"spinner-border"],[1,"sr-only"],[1,"table-responsive"],[1,"table","table-striped"],["scope","col","sortable","code",3,"oldColumn","sort"],["scope","col","sortable","description",3,"oldColumn","sort"],["scope","col","sortable","formula",3,"oldColumn","sort"],["scope","col","sortable","rateTypeOne",3,"oldColumn","sort"],["scope","col","sortable","isApplyCurrencyRounding",3,"oldColumn","sort"],["scope","col","sortable","createdAt",3,"oldColumn","sort"],[4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between","p-2"],[3,"collectionSize","page","pageSize","rotate","maxSize","boundaryLinks","pageChange"],[1,"custom-select",2,"width","auto",3,"ngModel","ngModelOptions","ngModelChange"],[3,"ngValue"]],template:function(e,r){if(1&e&&(t.TgZ(0,"div"),t._UZ(1,"app-page-header",0),t.TgZ(2,"div",1)(3,"div",2)(4,"div",3)(5,"form")(6,"div",4)(7,"div",5)(8,"div",6)(9,"input",7),t.NdJ("ngModelChange",function(a){return r._state.searchTerm=a})("ngModelChange",function(a){return r.searchTermUpdate.next(a)}),t.qZA()()(),t.YNc(10,U,3,0,"div",8),t.qZA(),t.YNc(11,J,5,0,"ng-container",9),t.YNc(12,H,3,0,"div",10),t.YNc(13,P,1,1,"ng-template",null,11,t.W1O),t.qZA()()()()()),2&e){const i=t.MAs(14);t.Q6J("@routerTransition",void 0),t.xp6(1),t.Q6J("heading","Rates"),t.xp6(1),t.Q6J("@routerTransition",void 0),t.xp6(7),t.Q6J("ngModel",r._state.searchTerm),t.xp6(1),t.Q6J("ngIf",!r.isLoading&&r._state.totalResults>0),t.xp6(1),t.Q6J("ngIf",r.isLoading),t.xp6(1),t.Q6J("ngIf",!r.isRates)("ngIfElse",i)}},dependencies:[o.sg,o.O5,c._Y,c.YN,c.Kr,c.Fj,c.EJ,c.JJ,c.JL,A.q,c.On,c.F,h.N9,Z,o.uU],data:{animation:[(0,_.Z9)()]}}),n})()}];let w=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[l.Bz.forChild(L),l.Bz]}),n})(),B=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[Z,M],imports:[o.ez,w,c.UX,m.$n,c.u5,h.ZS,h.jF,f.yI.forRoot()]}),n})()},4221:(b,g,s)=>{s.d(g,{j:()=>o.j});var o=s(8260)},8260:(b,g,s)=>{s.d(g,{j:()=>h});var o=s(4650);const c={asc:"desc",desc:"asc","":"asc"};let h=(()=>{class m{constructor(){this.direction="",this.sort=new o.vpe}ngOnChanges(l){this.sortable!==l?.oldColumn?.currentValue&&l?.oldColumn?.currentValue!==l?.oldColumn?.previousValue&&(this.direction="")}rotate(){this.direction=c[this.direction],this.sort.emit({column:this.sortable,direction:this.direction})}}return m.\u0275fac=function(l){return new(l||m)},m.\u0275dir=o.lG2({type:m,selectors:[["th","sortable",""]],hostVars:4,hostBindings:function(l,p){1&l&&o.NdJ("click",function(){return p.rotate()}),2&l&&o.ekj("asc","asc"===p.direction)("desc","desc"===p.direction)},inputs:{sortable:"sortable",oldColumn:"oldColumn",direction:"direction"},outputs:{sort:"sort"},exportAs:["NgbdSortableHeader"],features:[o.TTD]}),m})()},2558:(b,g,s)=>{s.d(g,{S:()=>o});const o=(c,h="records")=>{const m=new Blob([c],{type:"application/octet-stream"}),f=window.URL.createObjectURL(m);let l=document.createElement("a");l.href=f,l.download=`${h}.xlsx`,document.body.appendChild(l),l.click(),document.body.removeChild(l)}},8161:(b,g,s)=>{s.d(g,{q:()=>l});var o=s(4650),c=s(6895),h=s(7750);const m=function(p){return["/",p]};function f(p,_){if(1&p&&(o.TgZ(0,"li",6)(1,"a",7),o._uU(2),o.qZA()()),2&p){const d=o.oxw();o.xp6(1),o.Q6J("routerLink",o.VKq(2,m,d.previousLink)),o.xp6(1),o.Oqu(d.previousHeading)}}let l=(()=>{class p{constructor(){this.previousLink=decodeURIComponent(this.previousLink)}ngOnInit(){}}return p.\u0275fac=function(d){return new(d||p)},p.\u0275cmp=o.Xpm({type:p,selectors:[["app-page-header"]],inputs:{previousHeading:"previousHeading",previousLink:"previousLink",heading:"heading",previoudIcon:"previoudIcon",icon:"icon"},decls:9,vars:6,consts:[[1,"row"],[1,"col-xl-12"],[1,"page-header"],[1,"breadcrumb"],["class","breadcrumb-item",4,"ngIf"],[1,"breadcrumb-item","active"],[1,"breadcrumb-item"],["href","Javascript:void(0)",3,"routerLink"]],template:function(d,v){1&d&&(o.TgZ(0,"div",0)(1,"div",1)(2,"h2",2),o._uU(3),o.qZA(),o.TgZ(4,"ol",3),o.YNc(5,f,3,4,"li",4),o.TgZ(6,"li",5),o._UZ(7,"i"),o._uU(8),o.qZA()()()()),2&d&&(o.xp6(3),o.hij(" ",v.heading," "),o.xp6(2),o.Q6J("ngIf",v.previousHeading),o.xp6(2),o.Gre("fa ",v.icon,""),o.xp6(1),o.hij(" ",v.heading,""))},dependencies:[c.O5,h.yS],styles:[".breadcrumb[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;margin-bottom:0;list-style:none;padding:7px 0 0 22px}.breadcrumb-item[_ngcontent-%COMP%]{color:#773784}.breadcrumb-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none!important;color:#773784}.breadcrumb-item.active[_ngcontent-%COMP%]{color:#773784}.breadcrumb[_ngcontent-%COMP%]   .breadcrumb-item[_ngcontent-%COMP%]:first-child   i[_ngcontent-%COMP%]{margin-right:1rem}@media (max-width: 768px){.breadcrumb-item.active[_ngcontent-%COMP%]{color:#773784}}"]}),p})()},8372:(b,g,s)=>{s.d(g,{b:()=>m});var o=s(4049),c=s(4482),h=s(5403);function m(f,l=o.z){return(0,c.e)((p,_)=>{let d=null,v=null,R=null;const T=()=>{if(d){d.unsubscribe(),d=null;const C=v;v=null,_.next(C)}};function t(){const C=R+f,x=l.now();if(x<C)return d=this.schedule(void 0,C-x),void _.add(d);T()}p.subscribe((0,h.x)(_,C=>{v=C,R=l.now(),d||(d=l.schedule(t,f),_.add(d))},()=>{T(),_.complete()},void 0,()=>{v=d=null}))})}}}]);