"use strict";(self.webpackChunktest_ng7=self.webpackChunktest_ng7||[]).push([[571,161],{4571:(x,p,a)=>{a.r(p),a.d(p,{MatterNameModule:()=>B});var i=a(6895),m=a(7750),f=a(4221),g=a(4903),h=a(2558),l=a(7579),c=a(8372),_=a(1884),t=a(4650),M=a(2340),T=a(529),b=a(2487);let S=(()=>{class r{constructor(e,n){this.http=e,this.apiService=n,this.url=M.N.backendUrl}getMatters(e,n,o){let s=this.queryString(n,o);return this.apiService.post(""==e.searchTerm?`/search/matter?sortBy=${e.sortColumn+":"+e.sortDirection}&limit=${e.limit}&page=${e.page}${s}`:`/search/matter?sortBy=${e.sortColumn+":"+e.sortDirection}&limit=${e.limit}&page=${e.page}&search=${e.searchTerm}${s}`,{})}getMaterForExcelDownload(e,n,o){let s=this.queryString(n,o);return this.apiService.postBlob(""==e.searchTerm?`/search/matter/download?sortBy=${e.sortColumn+":"+e.sortDirection}${s}`:`/search/matter/download?sortBy=${e.sortColumn+":"+e.sortDirection}&search=${e.searchTerm}${s}`,{})}getDeletedMatters(e){return this.apiService.get(""==e.searchTerm?`/Matter?isDelete=true&sortBy=${e.sortColumn+":"+e.sortDirection}&limit=${e.limit}&page=${e.page}`:`/Matter?isDelete=true&sortBy=${e.sortColumn+":"+e.sortDirection}&limit=${e.limit}&page=${e.page}&search=${e.searchTerm}`)}getMatterCSV(){return this.apiService.get("/Matter/bulk/csv/data")}getMatterById(e){return this.apiService.get(`/Matter/${e}`)}addNewMatter(e){return this.apiService.post("/Matter",e)}updateMatter(e,n){return this.apiService.patch(`/Matter/${e}`,n)}deleteMatter(e){return this.apiService.delete("/Matter/"+e)}queryString(e,n){let o=[];e&&o.push(`matterName=${decodeURI(e)}`),n&&o.push(`matterId=${decodeURI(n)}`);let s="";return o.length>0&&(s=`&${o.join("&")}`),s}}return r.\u0275fac=function(e){return new(e||r)(t.LFG(T.eN),t.LFG(b.s))},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var v=a(4304),u=a(4006),Z=a(8161),y=a(6393);function A(r,d){if(1&r){const e=t.EpF();t.TgZ(0,"div",12)(1,"button",13),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.downloadFileExcel())}),t._uU(2,"Download"),t.qZA()()}}function N(r,d){1&r&&(t.ynx(0),t.TgZ(1,"div",14)(2,"div",15)(3,"span",16),t._uU(4,"Loading..."),t.qZA()()(),t.BQk())}function O(r,d){1&r&&(t.TgZ(0,"div")(1,"p",14),t._uU(2,"No Matter found"),t.qZA()())}function I(r,d){1&r&&(t.TgZ(0,"tbody")(1,"tr")(2,"td",26)(3,"div",14)(4,"div",15)(5,"span",16),t._uU(6,"Loading..."),t.qZA()()()()()())}function U(r,d){if(1&r&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA()()),2&r){const e=d.$implicit,n=t.oxw(4);t.xp6(2),t.Oqu(null==e?null:e.matterId),t.xp6(2),t.Oqu(null==e?null:e.matterName),t.xp6(2),t.Oqu(null==e||null==e.client?null:e.client.clientId),t.xp6(2),t.Oqu(null==e?null:e.clientName),t.xp6(2),t.Oqu(null==e||null==e.client?null:e.client.clientGroup),t.xp6(2),t.Oqu(null==n.agreement?null:n.agreement.feeArrangementType)}}function P(r,d){if(1&r&&(t.TgZ(0,"tbody"),t.YNc(1,U,13,6,"tr",27),t.qZA()),2&r){const e=t.oxw(3);t.xp6(1),t.Q6J("ngForOf",e.matters)}}const L=function(){return{standalone:!0}};function D(r,d){if(1&r){const e=t.EpF();t.TgZ(0,"div")(1,"div",17)(2,"table",18)(3,"thead")(4,"tr")(5,"th",19),t.NdJ("sort",function(o){t.CHM(e);const s=t.oxw(2);return t.KtG(s.onSort(o))}),t._uU(6,"Matter ID"),t.qZA(),t.TgZ(7,"th",20),t.NdJ("sort",function(o){t.CHM(e);const s=t.oxw(2);return t.KtG(s.onSort(o))}),t._uU(8,"Matter Name"),t.qZA(),t.TgZ(9,"th",19),t.NdJ("sort",function(o){t.CHM(e);const s=t.oxw(2);return t.KtG(s.onSort(o))}),t._uU(10,"Client ID"),t.qZA(),t.TgZ(11,"th",19),t.NdJ("sort",function(o){t.CHM(e);const s=t.oxw(2);return t.KtG(s.onSort(o))}),t._uU(12,"Client name"),t.qZA(),t.TgZ(13,"th",19),t.NdJ("sort",function(o){t.CHM(e);const s=t.oxw(2);return t.KtG(s.onSort(o))}),t._uU(14,"Client Group"),t.qZA(),t.TgZ(15,"th",21),t.NdJ("sort",function(o){t.CHM(e);const s=t.oxw(2);return t.KtG(s.onSort(o))}),t._uU(16," Fee Arrangement Type"),t.qZA()()(),t.YNc(17,I,7,0,"tbody",9),t.YNc(18,P,2,1,"tbody",9),t.qZA(),t.TgZ(19,"div",22)(20,"ngb-pagination",23),t.NdJ("pageChange",function(o){t.CHM(e);const s=t.oxw(2);return t.KtG(s._state.page=o)})("pageChange",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.refreshMatters())}),t.qZA(),t.TgZ(21,"select",24),t.NdJ("ngModelChange",function(o){t.CHM(e);const s=t.oxw(2);return t.KtG(s._state.limit=o)})("ngModelChange",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.refreshMatters())}),t.TgZ(22,"option",25),t._uU(23,"10 items per page"),t.qZA(),t.TgZ(24,"option",25),t._uU(25,"20 items per page"),t.qZA(),t.TgZ(26,"option",25),t._uU(27,"30 items per page"),t.qZA()()()()()}if(2&r){const e=t.oxw(2);t.xp6(17),t.Q6J("ngIf",e.isPaginationLoading),t.xp6(1),t.Q6J("ngIf",!e.isPaginationLoading),t.xp6(2),t.Q6J("collectionSize",e._state.totalResults)("page",e._state.page)("pageSize",e._state.limit)("rotate",!0)("maxSize",5)("boundaryLinks",!0),t.xp6(1),t.Q6J("ngModel",e._state.limit)("ngModelOptions",t.DdM(13,L)),t.xp6(1),t.Q6J("ngValue",10),t.xp6(2),t.Q6J("ngValue",20),t.xp6(2),t.Q6J("ngValue",30)}}function J(r,d){if(1&r&&t.YNc(0,D,28,14,"div",9),2&r){const e=t.oxw();t.Q6J("ngIf",!e.isLoading)}}const E=[{path:"",component:(()=>{class r{constructor(e,n,o,s,F){this.router=e,this.matterService=n,this.cdr=o,this.route=s,this.confirmationDialogService=F,this.matters=[],this.searchTermUpdate=new l.x,this.isLoading=!1,this.isMatters=!0,this.isPaginationLoading=!1,this._state={page:1,limit:20,totalPages:1,totalResults:0,searchTerm:"",sortColumn:"createdAt",sortDirection:"desc"},this.route.params.subscribe(C=>{""!==C.matterName&&null!=C.matterName&&(this.matterName=C.matterName),""!==C.matterId&&null!=C.matterId&&(this.matterId=C.matterId)}),this.searchTermUpdate.pipe((0,c.b)(200),(0,_.x)()).subscribe(C=>{this._state.page=1,this._state.searchTerm=C,this.isLoading=!0,this.getAllMatters(this._state,this.matterName,this.matterId)})}ngOnInit(){this.isLoading=!0,this.getAllMatters(this._state,this.matterName,this.matterId)}downloadFileExcel(){return this.matterService.getMaterForExcelDownload(this._state,this.matterName,this.matterId).subscribe(e=>{(0,h.S)(e,"matter")},e=>{})}onSort({column:e,direction:n}){this.sortedColumn=e,this.sortedDirection=n,this._state.sortColumn=e,this._state.sortDirection=n,this.getAllMatters(this._state,this.matterName,this.matterId)}getAllMatters(e,n,o){this.matterService.getMatters(e,n,o).subscribe(s=>{this.isPaginationLoading=!1,this.matters=s.results,this.isMatters=0!=this.matters.length,this.setState(s),this.isLoading=!1},s=>{this.isPaginationLoading=!1,this.isLoading=!1})}refreshMatters(){this.isPaginationLoading=!0,this.getAllMatters(this._state,this.matterName,this.matterId)}setState(e){this._state.page=e.page,this._state.limit=e.limit,this._state.totalPages=e.totalPages,this._state.totalResults=e.totalResults}editMatter(e){this.router.navigate(["/matters/edit-matter/"+e])}updateStatus(e,n){this.matterService.updateMatter(e,{isActive:!n}).subscribe(s=>{s&&this.refreshMatters()})}updateFavorite(e,n){this.matterService.updateMatter(e,{isFavorite:!n}).subscribe(s=>{s&&this.refreshMatters()})}deleteMatter(e){this.confirmationDialogService.confirm("Please confirm..","Do you really want to delete this matter ?").then(n=>{n&&this.matterService.deleteMatter(e).subscribe(o=>{this.getAllMatters(this._state,this.matterName,this.matterId)})})}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(m.F0),t.Y36(S),t.Y36(t.sBO),t.Y36(m.gz),t.Y36(v.O))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-matter-name"]],viewQuery:function(e,n){if(1&e&&t.Gf(f.j,5),2&e){let o;t.iGM(o=t.CRH())&&(n.headers=o)}},decls:15,vars:8,consts:[[3,"heading"],[1,"container-fluid","mt-2"],[1,"card"],[1,"card-body"],[1,"row","mb-2"],[1,"col-md-10","text-left"],[1,"form-group","mb-1"],["type","text","type","text","name","searchTerm","id","searchstaffs","placeholder","Search here...",1,"form-control",3,"ngModel","ngModelChange"],["class","col-md-2 text-center",4,"ngIf"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["table",""],[1,"col-md-2","text-center"],["type","button",1,"btn","btn-primary",3,"click"],[1,"text-center"],["role","status",1,"spinner-border"],[1,"sr-only"],[1,"table-responsive"],[1,"table","table-striped"],["scope","col","sortable","name",3,"sort"],["scope","col","sortable","email",3,"sort"],["scope","col","sortable","feeArrangementType",3,"sort"],[1,"d-flex","justify-content-between","p-2"],[3,"collectionSize","page","pageSize","rotate","maxSize","boundaryLinks","pageChange"],[1,"custom-select",2,"width","auto",3,"ngModel","ngModelOptions","ngModelChange"],[3,"ngValue"],["colspan","6"],[4,"ngFor","ngForOf"]],template:function(e,n){if(1&e&&(t.TgZ(0,"div"),t._UZ(1,"app-page-header",0),t.TgZ(2,"div",1)(3,"div",2)(4,"div",3)(5,"form")(6,"div",4)(7,"div",5)(8,"div",6)(9,"input",7),t.NdJ("ngModelChange",function(s){return n._state.searchTerm=s})("ngModelChange",function(s){return n.searchTermUpdate.next(s)}),t.qZA()()(),t.YNc(10,A,3,0,"div",8),t.qZA(),t.YNc(11,N,5,0,"ng-container",9),t.YNc(12,O,3,0,"div",10),t.YNc(13,J,1,1,"ng-template",null,11,t.W1O),t.qZA()()()()()),2&e){const o=t.MAs(14);t.Q6J("@routerTransition",void 0),t.xp6(1),t.Q6J("heading","Matters"),t.xp6(1),t.Q6J("@routerTransition",void 0),t.xp6(7),t.Q6J("ngModel",n._state.searchTerm),t.xp6(1),t.Q6J("ngIf",!n.isLoading&&n._state.totalResults>0),t.xp6(1),t.Q6J("ngIf",n.isLoading),t.xp6(1),t.Q6J("ngIf",!n.isMatters)("ngIfElse",o)}},dependencies:[i.sg,i.O5,u._Y,u.YN,u.Kr,u.Fj,u.EJ,u.JJ,u.JL,Z.q,u.On,u.F,y.N9],data:{animation:[(0,g.Z9)()]}}),r})()}];let w=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[m.Bz.forChild(E),m.Bz]}),r})();var H=a(4336),$=a(1094);let B=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({providers:[f.j,S],imports:[i.ez,w,u.UX,H.$n,u.u5,y.ZS,y.jF,$.yI.forRoot()]}),r})()},4221:(x,p,a)=>{a.d(p,{j:()=>i.j});var i=a(8260)},8260:(x,p,a)=>{a.d(p,{j:()=>f});var i=a(4650);const m={asc:"desc",desc:"asc","":"asc"};let f=(()=>{class g{constructor(){this.direction="",this.sort=new i.vpe}ngOnChanges(l){this.sortable!==l?.oldColumn?.currentValue&&l?.oldColumn?.currentValue!==l?.oldColumn?.previousValue&&(this.direction="")}rotate(){this.direction=m[this.direction],this.sort.emit({column:this.sortable,direction:this.direction})}}return g.\u0275fac=function(l){return new(l||g)},g.\u0275dir=i.lG2({type:g,selectors:[["th","sortable",""]],hostVars:4,hostBindings:function(l,c){1&l&&i.NdJ("click",function(){return c.rotate()}),2&l&&i.ekj("asc","asc"===c.direction)("desc","desc"===c.direction)},inputs:{sortable:"sortable",oldColumn:"oldColumn",direction:"direction"},outputs:{sort:"sort"},exportAs:["NgbdSortableHeader"],features:[i.TTD]}),g})()},2558:(x,p,a)=>{a.d(p,{S:()=>i});const i=(m,f="records")=>{const g=new Blob([m],{type:"application/octet-stream"}),h=window.URL.createObjectURL(g);let l=document.createElement("a");l.href=h,l.download=`${f}.xlsx`,document.body.appendChild(l),l.click(),document.body.removeChild(l)}},8161:(x,p,a)=>{a.d(p,{q:()=>l});var i=a(4650),m=a(6895),f=a(7750);const g=function(c){return["/",c]};function h(c,_){if(1&c&&(i.TgZ(0,"li",6)(1,"a",7),i._uU(2),i.qZA()()),2&c){const t=i.oxw();i.xp6(1),i.Q6J("routerLink",i.VKq(2,g,t.previousLink)),i.xp6(1),i.Oqu(t.previousHeading)}}let l=(()=>{class c{constructor(){this.previousLink=decodeURIComponent(this.previousLink)}ngOnInit(){}}return c.\u0275fac=function(t){return new(t||c)},c.\u0275cmp=i.Xpm({type:c,selectors:[["app-page-header"]],inputs:{previousHeading:"previousHeading",previousLink:"previousLink",heading:"heading",previoudIcon:"previoudIcon",icon:"icon"},decls:9,vars:6,consts:[[1,"row"],[1,"col-xl-12"],[1,"page-header"],[1,"breadcrumb"],["class","breadcrumb-item",4,"ngIf"],[1,"breadcrumb-item","active"],[1,"breadcrumb-item"],["href","Javascript:void(0)",3,"routerLink"]],template:function(t,M){1&t&&(i.TgZ(0,"div",0)(1,"div",1)(2,"h2",2),i._uU(3),i.qZA(),i.TgZ(4,"ol",3),i.YNc(5,h,3,4,"li",4),i.TgZ(6,"li",5),i._UZ(7,"i"),i._uU(8),i.qZA()()()()),2&t&&(i.xp6(3),i.hij(" ",M.heading," "),i.xp6(2),i.Q6J("ngIf",M.previousHeading),i.xp6(2),i.Gre("fa ",M.icon,""),i.xp6(1),i.hij(" ",M.heading,""))},dependencies:[m.O5,f.yS],styles:[".breadcrumb[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;margin-bottom:0;list-style:none;padding:7px 0 0 22px}.breadcrumb-item[_ngcontent-%COMP%]{color:#773784}.breadcrumb-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none!important;color:#773784}.breadcrumb-item.active[_ngcontent-%COMP%]{color:#773784}.breadcrumb[_ngcontent-%COMP%]   .breadcrumb-item[_ngcontent-%COMP%]:first-child   i[_ngcontent-%COMP%]{margin-right:1rem}@media (max-width: 768px){.breadcrumb-item.active[_ngcontent-%COMP%]{color:#773784}}"]}),c})()},8372:(x,p,a)=>{a.d(p,{b:()=>g});var i=a(4049),m=a(4482),f=a(5403);function g(h,l=i.z){return(0,m.e)((c,_)=>{let t=null,M=null,T=null;const b=()=>{if(t){t.unsubscribe(),t=null;const v=M;M=null,_.next(v)}};function S(){const v=T+h,u=l.now();if(u<v)return t=this.schedule(void 0,v-u),void _.add(t);b()}c.subscribe((0,f.x)(_,v=>{M=v,T=l.now(),t||(t=l.schedule(S,h),_.add(t))},()=>{b(),_.complete()},void 0,()=>{M=t=null}))})}}}]);